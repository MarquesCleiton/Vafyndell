import{a as E}from"./chunk-2FOSI275.js";import"./chunk-5QAPYOWQ.js";import"./chunk-5J7TBXYM.js";import{$ as b,Ba as g,Ca as _,Da as y,Fa as I,Ha as m,M as x,N as f,Sa as n,Ta as S,Ua as s,Va as D,Za as w,aa as a,d as v,da as C,fa as h,ja as d,kb as T,nb as k,ob as M,ua as c,va as o,vb as O,wa as i,xa as p,xb as F}from"./chunk-AITSM7GI.js";function R(t,r){t&1&&(o(0,"div",3),p(1,"div",4),o(2,"p",5),n(3,"Carregando item..."),i()())}function V(t,r){if(t&1&&p(0,"img",14),t&2){let e=m(2);c("alt",w(e.item.nome))("src",e.item.imagem,b)}}function j(t,r){if(t&1&&(o(0,"p")(1,"span",15),n(2,"\u2728"),i(),o(3,"b"),n(4,"Efeito:"),i(),n(5),i()),t&2){let e=m(2);a(5),s(" ",e.item.efeito)}}function A(t,r){if(t&1&&(o(0,"p")(1,"span",16),n(2,"\u26A0\uFE0F"),i(),o(3,"b"),n(4,"Colateral:"),i(),n(5),i()),t&2){let e=m(2);a(5),s(" ",e.item.colateral)}}function L(t,r){if(t&1&&(o(0,"p")(1,"span",17),n(2,"\u{1F4DD}"),i(),o(3,"b"),n(4,"Descri\xE7\xE3o:"),i(),n(5),i()),t&2){let e=m(2);a(5),s(" ",e.item.descricao)}}function N(t,r){t&1&&(g(0),n(1,"\u{1F5D1}\uFE0F Excluir"),_())}function z(t,r){t&1&&(g(0),p(1,"span",18),n(2," Excluindo... "),_())}function U(t,r){t&1&&(g(0),n(1,"\u270F\uFE0F Editar"),_())}function q(t,r){t&1&&(g(0),p(1,"span",18),n(2," Editando... "),_())}function B(t,r){if(t&1){let e=y();g(0),o(1,"div",6),d(2,V,1,3,"img",7),i(),o(3,"h4",8),n(4),i(),o(5,"p")(6,"b"),n(7,"Categoria:"),i(),n(8),i(),o(9,"p")(10,"b"),n(11,"Origem:"),i(),n(12),i(),o(13,"p")(14,"b"),n(15,"Raridade:"),i(),n(16),i(),o(17,"p")(18,"b"),n(19,"Peso:"),i(),n(20),i(),p(21,"hr",9),d(22,j,6,1,"p",2)(23,A,6,1,"p",2)(24,L,6,1,"p",2),o(25,"div",10)(26,"button",11),I("click",function(){x(e);let u=m();return f(u.cancelar())}),n(27," \u2B05\uFE0F Cancelar "),i(),o(28,"button",12),I("click",function(){x(e);let u=m();return f(u.excluirItem())}),d(29,N,2,0,"ng-container",2)(30,z,3,0,"ng-container",2),i(),o(31,"button",13),I("click",function(){x(e);let u=m();return f(u.editarItem())}),d(32,U,2,0,"ng-container",2)(33,q,3,0,"ng-container",2),i()(),_()}if(t&2){let e=m();a(2),c("ngIf",e.item.imagem),a(2),S(e.item.nome),a(4),s(" ",e.item.categoria),a(4),s(" ",e.item.origem),a(4),s(" ",e.item.raridade),a(4),D(" ",e.item.peso," ",e.item.unidade_medida),a(2),c("ngIf",e.item.efeito),a(),c("ngIf",e.item.colateral),a(),c("ngIf",e.item.descricao),a(4),c("disabled",e.processandoExcluir),a(),c("ngIf",!e.processandoExcluir),a(),c("ngIf",e.processandoExcluir),a(),c("disabled",e.processandoEditar),a(),c("ngIf",!e.processandoEditar),a(),c("ngIf",e.processandoEditar)}}var P=class t{constructor(r,e,l){this.route=r;this.router=e;this.location=l}item=null;carregando=!0;processandoEditar=!1;processandoExcluir=!1;ngOnInit(){return v(this,null,function*(){let r=this.route.snapshot.paramMap.get("id");if(!r){this.router.navigate(["/catalogo"]);return}try{this.carregando=!0,yield E.syncItens();let e=yield E.getLocalItens();this.item=e.find(l=>String(l.id)===String(r))||null,this.item||(console.warn("[ItemCatalogo] Item n\xE3o encontrado"),this.router.navigate(["/catalogo"]))}catch(e){console.error("[ItemCatalogo] Erro ao carregar item:",e)}finally{this.carregando=!1}})}cancelar(){this.location.back()}editarItem(){this.item&&(this.processandoEditar=!0,setTimeout(()=>{this.router.navigate(["/cadastro-item-catalogo",this.item.id],{queryParams:{returnUrl:this.router.url}}),this.processandoEditar=!1},300))}excluirItem(){!this.item||!confirm(`\u{1F5D1}\uFE0F Deseja realmente excluir o item "${this.item.nome}"?`)||(this.processandoExcluir=!0,E.deleteItem(this.item.id).then(()=>{alert("\u2705 Item exclu\xEDdo com sucesso!"),this.router.navigate(["/catalogo"])}).catch(e=>{console.error("[ItemCatalogo] Erro ao excluir item:",e),alert("\u274C Erro ao excluir item. Veja o console.")}).finally(()=>{this.processandoExcluir=!1}))}static \u0275fac=function(e){return new(e||t)(C(O),C(F),C(T))};static \u0275cmp=h({type:t,selectors:[["app-item-catalogo"]],decls:3,vars:2,consts:[[1,"d-flex","flex-column","min-vh-100","bg-dark","text-light","p-3"],["class","text-center py-5",4,"ngIf"],[4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-light"],[1,"mt-2"],[1,"item-image","mb-3"],[3,"src","alt",4,"ngIf"],[1,"fw-bold","text-capitalize"],[1,"border-secondary"],[1,"d-flex","gap-2","mt-4"],[1,"btn","btn-secondary","flex-fill",3,"click"],[1,"btn","btn-outline-danger","flex-fill",3,"click","disabled"],[1,"btn","btn-outline-warning","flex-fill",3,"click","disabled"],[3,"src","alt"],[1,"text-warning"],[1,"text-danger"],[1,"text-info"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(e,l){e&1&&(o(0,"div",0),d(1,R,4,0,"div",1)(2,B,34,16,"ng-container",2),i()),e&2&&(a(),c("ngIf",l.carregando),a(),c("ngIf",!l.carregando&&l.item))},dependencies:[M,k],styles:[".item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:220px;object-fit:cover;border-radius:10px}h4[_ngcontent-%COMP%]{color:#fff;margin-bottom:.5rem}p[_ngcontent-%COMP%]{color:#ddd;margin-bottom:.4rem}hr[_ngcontent-%COMP%]{opacity:.3;margin:1rem 0}button[_ngcontent-%COMP%]{font-weight:500;border-radius:8px;padding:.5rem;transition:all .2s ease-in-out}button[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}"]})};export{P as ItemCatalogo};
