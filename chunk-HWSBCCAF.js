import{a as S}from"./chunk-N245TVBG.js";import{b as I,e as W,f as z,g as B,h as R,i as L,j as q,l as U,m as G,n as H,o as X,p as Y,q as K}from"./chunk-2XJV4ES4.js";import"./chunk-VZT3XYFG.js";import{Ia as u,Ja as e,Ka as t,La as E,Mb as A,Nb as F,Pa as w,Qa as y,Qb as N,Ra as _,T as g,Ta as b,U as c,Va as p,Zb as T,ac as Q,d as j,db as M,hb as i,ib as f,ja as V,ka as l,kb as P,mb as x,nb as C,oa as k,ob as h,pb as O,sa as D,vb as J,wa as v}from"./chunk-Y44Y2XZC.js";function $(m,r){if(m&1){let n=_();w(0),E(1,"img",25),e(2,"button",26),b("click",function(){g(n);let a=p();return c(a.removerImagem())}),i(3,"\u2716"),t(),y()}if(m&2){let n=p();l(),u("src",n.jogador.imagem,V)}}function ee(m,r){if(m&1){let n=_();e(0,"label",27)(1,"span",28),i(2,"\u{1F4F7}"),t(),e(3,"input",29),b("change",function(a){g(n);let s=p();return c(s.onFileChange(a))}),t()()}}function te(m,r){if(m&1){let n=_();e(0,"div",30)(1,"div",31),i(2),t(),e(3,"div",32)(4,"button",33),b("click",function(){let a=g(n).$implicit,s=p();return c(s.ajustarValor(a.key,-1))}),i(5,"\u2212"),t(),e(6,"input",34),b("ngModelChange",function(a){let s=g(n).$implicit,d=p();return c(d.setValor(s.key,a))}),t(),e(7,"button",33),b("click",function(){let a=g(n).$implicit,s=p();return c(s.ajustarValor(a.key,1))}),i(8,"+"),t()()()}if(m&2){let n=r.$implicit,o=p();l(2),P(" ",n.icon," ",n.label," "),l(4),u("name",O(n.key))("ngModel",o.getValor(n.key))}}function ie(m,r){m&1&&(w(0),i(1,"\u{1F4BE} Salvar"),y())}function oe(m,r){m&1&&(w(0),E(1,"span",35),i(2," Salvando... "),y())}var Z=class m{constructor(r){this.router=r}jogador={index:0,id:0,email:"",imagem:"",nome_do_jogador:"",personagem:"",pontos_de_vida:0,alinhamento:"",classe_de_armadura:0,forca:0,destreza:0,constituicao:0,inteligencia:0,sabedoria:0,carisma:0,energia:0,nivel:1,xp:0,dano_tomado:0,tipo_jogador:"",efeitos_temporarios:"",registo_de_jogo:"",classificacao:"",tipo:"",descricao:"",ataques:""};atributosNumericos=[{key:"nivel",label:"N\xEDvel",icon:"\u{1F3C5}"},{key:"xp",label:"XP",icon:"\u2B50"},{key:"forca",label:"For\xE7a",icon:"\u{1F4AA}"},{key:"destreza",label:"Destreza",icon:"\u{1F3C3}"},{key:"constituicao",label:"Constitui\xE7\xE3o",icon:"\u{1F6E1}\uFE0F"},{key:"inteligencia",label:"Intelig\xEAncia",icon:"\u{1F9E0}"},{key:"sabedoria",label:"Sabedoria",icon:"\u{1F4D6}"},{key:"carisma",label:"Carisma",icon:"\u{1F60E}"},{key:"energia",label:"Energia",icon:"\u26A1"},{key:"classe_de_armadura",label:"Armadura",icon:"\u{1F6E1}\uFE0F"}];salvando=!1;get vida(){return this.jogador.energia+this.jogador.constituicao}get vidaTotal(){return this.vida+this.jogador.classe_de_armadura}get fatorCura(){return Math.floor(this.jogador.energia/3)}get deslocamento(){return Math.floor(this.jogador.destreza/3)}getValor(r){return this.jogador[r]}setValor(r,n){this.jogador[r]=Math.max(0,n)}ajustarValor(r,n){this.setValor(r,this.getValor(r)+n)}onFileChange(r){let n=r.target;if(n.files&&n.files.length>0){let o=n.files[0],a=new FileReader;a.onload=()=>{this.jogador.imagem=a.result},a.readAsDataURL(o)}}removerImagem(){this.jogador.imagem=""}salvar(r){return j(this,null,function*(){if(!r.invalid)try{this.salvando=!0;let n=Q.getUser();if(!n?.email)throw new Error("Usu\xE1rio n\xE3o autenticado");this.jogador.email=n.email,yield S.syncJogadores();let o=yield S.getAllJogadores(),a=0;o.length>0&&(a=Math.max(...o.map(s=>s.index||0))),this.jogador.index=a+1,this.jogador.id=a+1,yield S.createJogador(this.jogador),window.alert("\u2705 Jogador salvo com sucesso!"),this.router.navigate(["/jogador"])}catch(n){console.error("[CadastroJogador] Erro ao salvar:",n),window.alert("\u274C Erro ao salvar jogador. Veja o console.")}finally{this.salvando=!1}})}static \u0275fac=function(n){return new(n||m)(k(T))};static \u0275cmp=D({type:m,selectors:[["app-cadastro-jogador"]],decls:83,vars:14,consts:[["form","ngForm"],["uploadBox",""],[1,"d-flex","flex-column","min-vh-100","bg-dark","text-light"],[1,"flex-grow-1","pb-5"],[3,"ngSubmit"],[1,"position-relative","text-center","mb-3"],[4,"ngIf","ngIfElse"],[1,"card","detalhe-card","shadow-lg","border-0"],[1,"card-body"],[1,"fw-bold","mb-3","text-light"],[1,"mb-3"],[1,"form-label","text-light"],["type","text","name","nomeJogador","required","",1,"form-control","input-dark",3,"ngModelChange","ngModel"],["type","text","name","personagem","required","",1,"form-control","input-dark",3,"ngModelChange","ngModel"],["name","alinhamento","required","",1,"form-select","input-dark",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],["name","tipoJogador","required","",1,"form-select","input-dark",3,"ngModelChange","ngModel"],[1,"fw-bold","mt-4","text-light"],[1,"atributos-grid-edit","mb-3"],["class","atributo-item-edit",4,"ngFor","ngForOf"],[1,"atributos-grid","mb-3"],[1,"atributo-item"],[1,"text-end","mt-4"],["type","submit",1,"btn","btn-save","px-4",3,"disabled"],[4,"ngIf"],["alt","Preview",1,"w-100","rounded","detalhe-img","shadow-sm",3,"src"],["type","button",1,"btn","btn-danger","rounded-circle","position-absolute","d-flex","align-items-center","justify-content-center",2,"top","10px","right","10px","width","40px","height","40px",3,"click"],[1,"upload-box"],[1,"fs-1"],["type","file","accept","image/*",1,"d-none",3,"change"],[1,"atributo-item-edit"],[1,"atributo-label","text-center"],[1,"atributo-controls"],["type","button",1,"btn","btn-sm","btn-outline-light",3,"click"],["type","number","min","0",1,"atributo-input",3,"ngModelChange","ngModel","name"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(n,o){if(n&1){let a=_();e(0,"div",2)(1,"div",3)(2,"form",4,0),b("ngSubmit",function(){g(a);let d=M(3);return c(o.salvar(d))}),e(4,"div",5),v(5,$,4,1,"ng-container",6)(6,ee,4,0,"ng-template",null,1,J),t(),e(8,"div",7)(9,"div",8)(10,"h4",9),i(11,"\u{1F4DC} Cadastro de Personagem"),t(),e(12,"div",10)(13,"label",11),i(14,"\u{1F64D} Nome do Jogador *"),t(),e(15,"input",12),h("ngModelChange",function(d){return g(a),C(o.jogador.nome_do_jogador,d)||(o.jogador.nome_do_jogador=d),c(d)}),t()(),e(16,"div",10)(17,"label",11),i(18,"\u{1F9D9} Nome do Personagem *"),t(),e(19,"input",13),h("ngModelChange",function(d){return g(a),C(o.jogador.personagem,d)||(o.jogador.personagem=d),c(d)}),t()(),e(20,"div",10)(21,"label",11),i(22,"\u2696\uFE0F Alinhamento *"),t(),e(23,"select",14),h("ngModelChange",function(d){return g(a),C(o.jogador.alinhamento,d)||(o.jogador.alinhamento=d),c(d)}),e(24,"option",15),i(25,"Selecione..."),t(),e(26,"option"),i(27,"Leal e Bom"),t(),e(28,"option"),i(29,"Neutro"),t(),e(30,"option"),i(31,"Ca\xF3tico e Bom"),t(),e(32,"option"),i(33,"Ca\xF3tico e Mau"),t()()(),e(34,"div",10)(35,"label",11),i(36,"\u{1F3AD} Tipo de Jogador *"),t(),e(37,"select",16),h("ngModelChange",function(d){return g(a),C(o.jogador.tipo_jogador,d)||(o.jogador.tipo_jogador=d),c(d)}),e(38,"option",15),i(39,"Selecione..."),t(),e(40,"option"),i(41,"Aventureiro"),t(),e(42,"option"),i(43,"Mestre"),t()()(),e(44,"h6",17),i(45,"\u{1F4CA} Atributos Num\xE9ricos"),t(),e(46,"div",18),v(47,te,9,5,"div",19),t(),e(48,"h6",17),i(49,"\u2694\uFE0F Atributos Calculados"),t(),e(50,"div",20)(51,"div",21)(52,"span"),i(53,"\u2764\uFE0F Vida"),t(),e(54,"b"),i(55),t(),e(56,"small"),i(57,"(Energia + Constitui\xE7\xE3o)"),t()(),e(58,"div",21)(59,"span"),i(60,"\u{1F496} Vida Total"),t(),e(61,"b"),i(62),t(),e(63,"small"),i(64,"(Vida + Armadura)"),t()(),e(65,"div",21)(66,"span"),i(67,"\u2728 Fator de Cura"),t(),e(68,"b"),i(69),t(),e(70,"small"),i(71,"(Energia / 3)"),t()(),e(72,"div",21)(73,"span"),i(74,"\u{1F3C3} Deslocamento"),t(),e(75,"b"),i(76),t(),e(77,"small"),i(78,"(Destreza / 3)"),t()()(),e(79,"div",22)(80,"button",23),v(81,ie,2,0,"ng-container",24)(82,oe,3,0,"ng-container",24),t()()()()()()()}if(n&2){let a=M(3),s=M(7);l(5),u("ngIf",o.jogador.imagem)("ngIfElse",s),l(10),x("ngModel",o.jogador.nome_do_jogador),l(4),x("ngModel",o.jogador.personagem),l(4),x("ngModel",o.jogador.alinhamento),l(14),x("ngModel",o.jogador.tipo_jogador),l(10),u("ngForOf",o.atributosNumericos),l(8),f(o.vida),l(7),f(o.vidaTotal),l(7),f(o.fatorCura),l(7),f(o.deslocamento),l(4),u("disabled",a.invalid||o.salvando),l(),u("ngIf",!o.salvando),l(),u("ngIf",o.salvando)}},dependencies:[N,A,F,K,L,G,H,I,q,U,W,z,Y,X,R,B],styles:[".detalhe-card[_ngcontent-%COMP%]{background:#1e1e1e;border-radius:12px;overflow:hidden}.detalhe-img[_ngcontent-%COMP%]{height:200px;object-fit:cover;border-radius:8px}.upload-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border:2px dashed #444;border-radius:12px;width:100%;height:140px;background:#1e1e1e;color:#6c757d;cursor:pointer;transition:border .2s ease,color .2s ease}.upload-box[_ngcontent-%COMP%]:hover{border-color:#0d6efd;color:#0d6efd}.input-dark[_ngcontent-%COMP%]{background:#1e1e1e;border:1px solid #444;color:#f8f9fa}.input-dark[_ngcontent-%COMP%]:focus{border-color:#0d6efd;box-shadow:0 0 0 .2rem #0d6efd40;outline:none}.atributos-grid-edit[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}@media (min-width: 768px){.atributos-grid-edit[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (min-width: 992px){.atributos-grid-edit[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}.atributo-item-edit[_ngcontent-%COMP%]{background:#2a2a2a;border-radius:6px;padding:8px 10px;display:flex;flex-direction:column;align-items:center}.atributo-label[_ngcontent-%COMP%]{font-weight:600;color:#f8f9fa;margin-bottom:6px;text-align:center}.atributo-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:6px}.atributo-input[_ngcontent-%COMP%]{width:60px;text-align:center;font-weight:700;color:#fff;background:#1e1e1e;border:1px solid #444;border-radius:4px;padding:2px 4px}.atributo-input[_ngcontent-%COMP%]:focus{border-color:#0d6efd;outline:none;box-shadow:0 0 0 .2rem #0d6efd40}.atributo-controls[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:2px 8px;font-size:.9rem;line-height:1}.atributos-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}@media (min-width: 768px){.atributos-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (min-width: 992px){.atributos-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}.atributo-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:#2a2a2a;border-radius:6px;padding:6px 10px;text-align:center}.atributo-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;color:#f8f9fa}.atributo-item[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#fff}.atributo-item[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.75rem;color:#aaa}.btn-save[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#218838);border:none;color:#fff;font-weight:600;display:flex;align-items:center;justify-content:center;gap:6px;transition:all .2s ease-in-out}.btn-save[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#34d058,#28a745);transform:translateY(-2px);box-shadow:0 4px 10px #0000004d}.btn-save[_ngcontent-%COMP%]:disabled{background:#444!important;color:#bbb!important;cursor:not-allowed;box-shadow:none}.btn-save[_ngcontent-%COMP%]{margin-left:auto;display:flex;align-items:center;justify-content:center;gap:6px}"]})};export{Z as CadastroJogador};
