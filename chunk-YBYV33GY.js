import{a as m}from"./chunk-F7W5OKDZ.js";import"./chunk-3Q56P2HE.js";import{Ca as D,Da as S,Ea as J,Fa as I,Ga as g,Ha as n,Ia as i,Ja as p,Jb as P,Mb as w,Na as M,Oa as y,Ra as O,Ta as u,Vb as F,a as b,b as _,d as s,fb as t,gb as x,ha as v,hb as l,ia as o,ma as h,qa as C,ua as E}from"./chunk-SKCXBLWO.js";var k=(r,e)=>e.label;function N(r,e){r&1&&(n(0,"div",2),p(1,"div",6),n(2,"p",7),t(3,"Carregando jogador..."),i()())}function R(r,e){if(r&1&&(M(0),p(1,"img",16),y()),r&2){let a=u(2);o(),g("src",a.jogador.imagem,v)}}function A(r,e){if(r&1&&(n(0,"div",15),t(1),n(2,"span"),t(3),i(),n(4,"b"),t(5),i(),n(6,"small"),t(7),i()()),r&2){let a=e.$implicit;o(),l(" ",a.icon," "),o(2),x(a.label),o(2),x(a.value),o(2),l("(",a.mod>=0?"+"+a.mod:a.mod,")")}}function L(r,e){if(r&1&&(n(0,"div",3),E(1,R,2,1,"ng-container",8),n(2,"div",9)(3,"h4",10),t(4),i(),n(5,"p",11),t(6),i(),n(7,"ul",12)(8,"li"),t(9,"\u{1F3C5} "),n(10,"span"),t(11,"N\xEDvel:"),i(),t(12),i(),n(13,"li"),t(14,"\u2B50 "),n(15,"span"),t(16,"XP:"),i(),t(17),i(),n(18,"li"),t(19,"\u{1F496} "),n(20,"span"),t(21,"Vida total:"),i(),t(22),i(),n(23,"li"),t(24,"\u2764\uFE0F "),n(25,"span"),t(26,"Vida:"),i(),t(27),i(),n(28,"li"),t(29,"\u{1F6E1}\uFE0F "),n(30,"span"),t(31,"Armadura:"),i(),t(32),i(),n(33,"li"),t(34,"\u{1F494} "),n(35,"span"),t(36,"Dano tomado:"),i(),t(37),i(),n(38,"li"),t(39,"\u2728 "),n(40,"span"),t(41,"Fator de cura:"),i(),t(42),i(),n(43,"li"),t(44,"\u{1F6B6}\u200D\u2642\uFE0F "),n(45,"span"),t(46,"Deslocamento:"),i(),t(47),i()(),n(48,"h6",13),t(49,"\u{1F4CA} Atributos"),i(),n(50,"div",14),J(51,A,8,4,"div",15,k),i()()()),r&2){let a=u();o(),g("ngIf",a.jogador.imagem),o(3),l("\u{1F9D9} ",a.jogador.personagem),o(2),l("\u2696\uFE0F ",a.jogador.alinhamento),o(6),l(" ",a.jogador.nivel),o(5),l(" ",a.jogador.xp),o(5),l(" ",a.jogador.vida_total),o(5),l(" ",a.jogador.pontos_de_vida),o(5),l(" ",a.jogador.classe_de_armadura),o(5),l(" ",a.jogador.dano_tomado),o(5),l(" ",a.jogador.fator_cura),o(5),l(" ",a.jogador.deslocamento),o(4),I(a.atributos)}}function V(r,e){r&1&&(n(0,"div",4),t(1,"Nenhum jogador encontrado. V\xE1 para o cadastro."),i())}var j=class r{constructor(e){this.router=e}jogador=null;atributos=[];loading=!0;ngOnInit(){return s(this,null,function*(){console.log("[Jogador] ngOnInit \u2192 carregando jogador...");try{let e=yield m.getLocalJogador();if(e)console.log("[Jogador] Jogador local encontrado:",e),this.setJogador(e),m.syncJogadores().then(a=>s(this,null,function*(){if(a){console.log("[Jogador] Cache atualizado. Recarregando jogador...");let d=yield m.getLocalJogador();d&&this.setJogador(d)}}));else{console.log("[Jogador] Nenhum jogador local. Tentando buscar online...");let a=yield m.forceFetchJogador();a?this.setJogador(a):(console.warn("[Jogador] Nenhum jogador encontrado online \u2192 redirecionando para o cadastro"),this.router.navigate(["/cadastro-jogador"]))}}catch(e){console.error("[Jogador] Erro ao carregar Jogador:",e),this.router.navigate(["/login"])}})}setJogador(e){let a=e.energia+e.constituicao,d=Math.floor(e.energia/3),f=a+e.classe_de_armadura,z=Math.floor(e.destreza/3);this.jogador=_(b({},e),{pontos_de_vida:a,fator_cura:d,vida_total:f,deslocamento:z});let c=T=>Math.floor((T-10)/2);this.atributos=[{label:"For\xE7a",value:e.forca,mod:c(e.forca),icon:"\u{1F4AA}"},{label:"Destreza",value:e.destreza,mod:c(e.destreza),icon:"\u{1F938}\u200D\u2642\uFE0F"},{label:"Constitui\xE7\xE3o",value:e.constituicao,mod:c(e.constituicao),icon:"\u{1FAA8}"},{label:"Intelig\xEAncia",value:e.inteligencia,mod:c(e.inteligencia),icon:"\u{1F9E0}"},{label:"Sabedoria",value:e.sabedoria,mod:c(e.sabedoria),icon:"\u{1F4D6}"},{label:"Carisma",value:e.carisma,mod:c(e.carisma),icon:"\u{1F60E}"},{label:"Energia",value:e.energia,mod:c(e.energia),icon:"\u26A1"}],this.loading=!1}editarJogador(){this.router.navigate(["/edicao-jogador"])}static \u0275fac=function(a){return new(a||r)(h(F))};static \u0275cmp=C({type:r,selectors:[["app-jogador"]],decls:7,vars:1,consts:[[1,"d-flex","flex-column","min-vh-100","bg-dark","text-light"],[1,"flex-grow-1","pb-5"],[1,"text-center","py-5"],[1,"card","detalhe-card","shadow-lg","border-0"],[1,"alert","alert-warning","mt-4"],[1,"fab","fab-primary",3,"click"],["role","status",1,"spinner-border","text-light"],[1,"mt-2"],[4,"ngIf"],[1,"card-body","pb-5"],[1,"fw-bold","mb-1","text-light"],[1,"text-secondary","mb-3"],[1,"info-list","mb-3"],[1,"fw-bold","mt-3","text-light"],[1,"atributos-grid","compact","mb-3"],[1,"atributo-item"],["alt","Imagem do jogador",1,"card-img-top","detalhe-img",3,"src"]],template:function(a,d){a&1&&(n(0,"div",0)(1,"div",1),D(2,N,4,0,"div",2)(3,L,53,11,"div",3)(4,V,2,0,"div",4),i(),n(5,"button",5),O("click",function(){return d.editarJogador()}),t(6," \u270F\uFE0F "),i()()),a&2&&(o(2),S(d.loading?2:d.jogador?3:4))},dependencies:[w,P],styles:[".detalhe-card[_ngcontent-%COMP%]{background:#1e1e1e;border-radius:12px;overflow:hidden}.detalhe-img[_ngcontent-%COMP%]{max-height:220px;object-fit:cover}.info-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;font-size:.95rem}.info-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:4px;color:#f1f1f1}.info-list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;color:#ffc107}.atributos-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:8px 12px;font-size:.9rem;color:#f1f1f1}.atributo-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;white-space:nowrap;font-size:.9rem;background:#2a2a2a;border-radius:6px;padding:4px 8px}.atributo-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500;color:#ccc;margin-right:2px}.atributo-item[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#fff}.atributo-item[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#aaa;margin-left:2px}.fab[_ngcontent-%COMP%]{position:fixed;bottom:80px;right:20px;width:60px;height:60px;border-radius:50%;font-size:1.5rem;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 14px #0006}.fab-primary[_ngcontent-%COMP%]{background:#0d6efd;color:#fff}.fab-primary[_ngcontent-%COMP%]:hover{background:#0b5ed7}"]})};export{j as Jogador};
