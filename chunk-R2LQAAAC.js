import{Eb as l,Fb as u,Jb as x,Kb as w,Nb as v,Ob as m,Pb as r,Sa as d,Ta as h,Ua as g,_b as C,bc as b,eb as p,la as s,ma as a,mb as _,wb as f,xb as M}from"./chunk-YAKM3PEZ.js";function T(c,t){if(c&1){let e=x();l(0,"div",0)(1,"button",1),m("click",function(){s(e);let i=r();return a(i.fechar())}),b(2,"\u2716"),u(),l(3,"div",2),m("touchstart",function(i){s(e);let n=r();return a(n.onTouchStart(i))})("touchmove",function(i){s(e);let n=r();return a(n.onTouchMove(i))})("touchend",function(i){s(e);let n=r();return a(n.onTouchEnd(i))})("click",function(i){return s(e),a(i.stopPropagation())}),l(4,"img",3),m("wheel",function(i){s(e);let n=r();return a(n.ajustarZoom(i))})("mousedown",function(i){s(e);let n=r();return a(n.onMouseDown(i))}),u()()()}if(c&2){let e=r();g(4),C("transform","translate("+e.posX+"px, "+e.posY+"px) scale("+e.zoom+")"),w("src",e.imagem,d)}}var E=class c{imagem=null;aberto=!1;fecharModal=new _;zoom=1;posX=0;posY=0;dragging=!1;startX=0;startY=0;pinchStartDist=0;pinchActive=!1;fechar(){this.fecharModal.emit(),this.reset()}reset(){this.zoom=1,this.posX=0,this.posY=0}ajustarZoom(t){t.preventDefault();let e=t.deltaY>0?-.1:.1;this.zoom=Math.min(Math.max(this.zoom+e,.5),3)}onMouseDown(t){this.zoom<=1||(this.dragging=!0,this.startX=t.clientX-this.posX,this.startY=t.clientY-this.posY)}onMouseMove(t){this.dragging&&(this.posX=t.clientX-this.startX,this.posY=t.clientY-this.startY)}onMouseUp(){this.dragging=!1}onTouchStart(t){t.touches.length===1&&this.zoom>1?(this.dragging=!0,this.startX=t.touches[0].clientX-this.posX,this.startY=t.touches[0].clientY-this.posY):t.touches.length===2&&(this.pinchActive=!0,this.pinchStartDist=this.getDistance(t.touches))}onTouchMove(t){if(this.dragging&&t.touches.length===1)this.posX=t.touches[0].clientX-this.startX,this.posY=t.touches[0].clientY-this.startY;else if(this.pinchActive&&t.touches.length===2){let e=this.getDistance(t.touches),o=e/this.pinchStartDist;this.zoom=Math.min(Math.max(this.zoom*o,.5),3),this.pinchStartDist=e}}onTouchEnd(t){t.touches.length===0&&(this.dragging=!1,this.pinchActive=!1)}getDistance(t){let[e,o]=[t[0],t[1]],i=o.clientX-e.clientX,n=o.clientY-e.clientY;return Math.sqrt(i*i+n*n)}static \u0275fac=function(e){return new(e||c)};static \u0275cmp=p({type:c,selectors:[["app-image-modal"]],hostBindings:function(e,o){e&1&&v("mousemove",function(n){return o.onMouseMove(n)},h)("mouseup",function(){return o.onMouseUp()},h)},inputs:{imagem:"imagem",aberto:"aberto"},outputs:{fecharModal:"fecharModal"},decls:1,vars:1,consts:[[1,"imagem-modal"],[1,"btn-fechar",3,"click"],[1,"imagem-container",3,"touchstart","touchmove","touchend","click"],["alt","Visualiza\xE7\xE3o",1,"imagem-zoom",3,"wheel","mousedown","src"]],template:function(e,o){e&1&&f(0,T,5,3,"div",0),e&2&&M(o.aberto?0:-1)},styles:[".imagem-modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000e6;display:flex;align-items:center;justify-content:center;z-index:2000;touch-action:none}.imagem-container[_ngcontent-%COMP%]{width:100%;height:100%;overflow:visible;display:flex;align-items:center;justify-content:center}.imagem-zoom[_ngcontent-%COMP%]{max-width:100%;max-height:100%;-webkit-user-select:none;user-select:none;will-change:transform;cursor:grab}.imagem-zoom[_ngcontent-%COMP%]:active{cursor:grabbing}.btn-fechar[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;width:40px;height:40px;background:#000000b3;border:none;color:#fff;font-size:1.2rem;border-radius:50%;cursor:pointer;z-index:2100;display:flex;align-items:center;justify-content:center;transition:background .2s}.btn-fechar[_ngcontent-%COMP%]:hover{background:#f00c}"]})};export{E as a};
