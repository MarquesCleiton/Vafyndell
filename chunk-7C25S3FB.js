import{a as $}from"./chunk-DK4BJW43.js";import{c as I,f as T,g as z,h as L,i as B,j as W,k as q,m as R,n as U,o as G,p as H,q as X,r as K}from"./chunk-GFP7435U.js";import{a as Y,b as Z}from"./chunk-UJSUP3BC.js";import{f as J,g as N,j as A,s as F,w as Q}from"./chunk-WLM7QTUH.js";import{Db as w,Eb as y,Fb as b,Jb as f,Lb as p,Pa as j,Qa as d,Va as k,Vb as S,Zb as o,_b as _,ab as P,ac as V,cc as x,d as M,dc as C,ec as h,fb as v,fc as D,ia as g,ja as c,mc as O,wb as u,xb as e,yb as t,zb as E}from"./chunk-QQSIVCMV.js";function te(s,r){if(s&1){let n=b();w(0),E(1,"img",25),e(2,"button",26),f("click",function(){g(n);let a=p();return c(a.removerImagem())}),o(3,"\u2716"),t(),y()}if(s&2){let n=p();d(),u("src",n.jogador.imagem,j)}}function oe(s,r){if(s&1){let n=b();e(0,"label",27)(1,"span",28),o(2,"\u{1F4F7}"),t(),e(3,"input",29),f("change",function(a){g(n);let m=p();return c(m.onFileChange(a))}),t()()}}function ie(s,r){if(s&1){let n=b();e(0,"div",30)(1,"div",31),o(2),t(),e(3,"div",32)(4,"button",33),f("click",function(){let a=g(n).$implicit,m=p();return c(m.ajustarValor(a.key,-1))}),o(5,"\u2212"),t(),e(6,"input",34),f("ngModelChange",function(a){let m=g(n).$implicit,l=p();return c(l.setValor(m.key,a))}),t(),e(7,"button",33),f("click",function(){let a=g(n).$implicit,m=p();return c(m.ajustarValor(a.key,1))}),o(8,"+"),t()()()}if(s&2){let n=r.$implicit,i=p();d(2),V(" ",n.icon," ",n.label," "),d(4),u("name",D(n.key))("ngModel",i.getValor(n.key))}}function ne(s,r){s&1&&(w(0),o(1,"\u{1F4BE}"),y())}function ae(s,r){s&1&&(w(0),E(1,"span",35),y())}var ee=class s{constructor(r){this.router=r}jogador={index:0,id:"",email:"",imagem:"",nome_do_jogador:"",personagem:"",pontos_de_vida:0,alinhamento:"",classe_de_armadura:0,forca:0,destreza:0,constituicao:0,inteligencia:0,sabedoria:0,carisma:0,energia:0,nivel:1,xp:0,dano_tomado:0,tipo_jogador:"",efeitos_temporarios:"",registo_de_jogo:"",classificacao:"",tipo:"",descricao:"",ataques:""};atributosNumericos=[{key:"nivel",label:"N\xEDvel",icon:"\u{1F3C5}"},{key:"xp",label:"XP",icon:"\u2B50"},{key:"forca",label:"For\xE7a",icon:"\u{1F4AA}"},{key:"destreza",label:"Destreza",icon:"\u{1F3C3}"},{key:"constituicao",label:"Constitui\xE7\xE3o",icon:"\u{1F6E1}\uFE0F"},{key:"inteligencia",label:"Intelig\xEAncia",icon:"\u{1F9E0}"},{key:"sabedoria",label:"Sabedoria",icon:"\u{1F4D6}"},{key:"carisma",label:"Carisma",icon:"\u{1F60E}"},{key:"energia",label:"Energia",icon:"\u26A1"},{key:"classe_de_armadura",label:"Armadura",icon:"\u{1F6E1}\uFE0F"}];salvando=!1;repo=new Z("Personagem","Personagem");get vida(){return this.jogador.energia+this.jogador.constituicao}get vidaTotal(){return this.vida+this.jogador.classe_de_armadura}get fatorCura(){return Math.floor(this.jogador.energia/3)}get deslocamento(){return Math.floor(this.jogador.destreza/3)}getValor(r){return this.jogador[r]}setValor(r,n){this.jogador[r]=Math.max(0,n)}ajustarValor(r,n){this.setValor(r,this.getValor(r)+n)}onFileChange(r){return M(this,null,function*(){let n=r.target;if(n.files&&n.files.length>0){let i=n.files[0];try{this.jogador.imagem=yield $.toOptimizedBase64(i,.72,1024)}catch(a){console.error("[CadastroJogador] Erro ao otimizar imagem:",a)}}})}removerImagem(){this.jogador.imagem=""}salvar(r){return M(this,null,function*(){if(!r.invalid)try{this.salvando=!0;let n=Q.getUser();if(!n?.email)throw new Error("Usu\xE1rio n\xE3o autenticado");this.jogador.email=n.email,yield this.repo.sync(),this.jogador.id=Y.generateULID();let i=yield this.repo.getLocal(),a=i.length>0?Math.max(...i.map(m=>m.index||0)):0;this.jogador.index=a+1,yield this.repo.create(this.jogador),window.alert("\u2705 Jogador salvo com sucesso!"),this.router.navigate(["/jogador"])}catch(n){console.error("[CadastroJogador] Erro ao salvar:",n),window.alert("\u274C Erro ao salvar jogador. Veja o console.")}finally{this.salvando=!1}})}static \u0275fac=function(n){return new(n||s)(k(F))};static \u0275cmp=P({type:s,selectors:[["app-cadastro-jogador"]],decls:93,vars:14,consts:[["form","ngForm"],["uploadBox",""],[1,"d-flex","flex-column","min-vh-100","bg-dark","text-light"],[1,"flex-grow-1","pb-5"],["id","formCadastroJogador",3,"ngSubmit"],[1,"position-relative","text-center","mb-3"],[4,"ngIf","ngIfElse"],[1,"card","detalhe-card","shadow-lg","border-0"],[1,"card-body"],[1,"fw-bold","mb-3","text-light"],[1,"mb-3"],[1,"form-label","text-light"],["type","text","name","nomeJogador","required","",1,"form-control","input-dark",3,"ngModelChange","ngModel"],["type","text","name","personagem","required","",1,"form-control","input-dark",3,"ngModelChange","ngModel"],["name","alinhamento","required","",1,"form-select","input-dark",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],["name","tipoJogador","required","",1,"form-select","input-dark",3,"ngModelChange","ngModel"],[1,"fw-bold","mt-4","text-light"],[1,"atributos-grid-edit","mb-3"],["class","atributo-item-edit",4,"ngFor","ngForOf"],[1,"atributos-grid","mb-3"],[1,"atributo-item"],[1,"fab-stack"],["type","submit","form","formCadastroJogador",1,"fab","fab-warning",3,"disabled"],[4,"ngIf"],["alt","Preview",1,"w-100","rounded","detalhe-img","shadow-sm",3,"src"],["type","button",1,"btn","btn-danger","rounded-circle","position-absolute","d-flex","align-items-center","justify-content-center",2,"top","10px","right","10px","width","40px","height","40px",3,"click"],[1,"upload-box"],[1,"fs-1"],["type","file","accept","image/*",1,"d-none",3,"change"],[1,"atributo-item-edit"],[1,"atributo-label","text-center"],[1,"atributo-controls"],["type","button",1,"btn","btn-sm","btn-outline-light",3,"click"],["type","number","min","0",1,"atributo-input",3,"ngModelChange","ngModel","name"],[1,"spinner-border","spinner-border-sm"]],template:function(n,i){if(n&1){let a=b();e(0,"div",2)(1,"div",3)(2,"form",4,0),f("ngSubmit",function(){g(a);let l=S(3);return c(i.salvar(l))}),e(4,"div",5),v(5,te,4,1,"ng-container",6)(6,oe,4,0,"ng-template",null,1,O),t(),e(8,"div",7)(9,"div",8)(10,"h4",9),o(11,"\u{1F4DC} Cadastro de Personagem"),t(),e(12,"div",10)(13,"label",11),o(14,"\u{1F64D} Nome do Jogador *"),t(),e(15,"input",12),h("ngModelChange",function(l){return g(a),C(i.jogador.nome_do_jogador,l)||(i.jogador.nome_do_jogador=l),c(l)}),t()(),e(16,"div",10)(17,"label",11),o(18,"\u{1F9D9} Nome do Personagem *"),t(),e(19,"input",13),h("ngModelChange",function(l){return g(a),C(i.jogador.personagem,l)||(i.jogador.personagem=l),c(l)}),t()(),e(20,"div",10)(21,"label",11),o(22,"\u2696\uFE0F Alinhamento *"),t(),e(23,"select",14),h("ngModelChange",function(l){return g(a),C(i.jogador.alinhamento,l)||(i.jogador.alinhamento=l),c(l)}),e(24,"option",15),o(25,"Selecione..."),t(),e(26,"option"),o(27,"Leal e Bom (Lawful Good)"),t(),e(28,"option"),o(29,"Neutro e Bom (Neutral Good)"),t(),e(30,"option"),o(31,"Ca\xF3tico e Bom (Chaotic Good)"),t(),e(32,"option"),o(33,"Leal e Neutro (Lawful Neutral)"),t(),e(34,"option"),o(35,"Neutro (True Neutral)"),t(),e(36,"option"),o(37,"Ca\xF3tico e Neutro (Chaotic Neutral)"),t(),e(38,"option"),o(39,"Leal e Mau (Lawful Evil)"),t(),e(40,"option"),o(41,"Neutro e Mau (Neutral Evil)"),t(),e(42,"option"),o(43,"Ca\xF3tico e Mau (Chaotic Evil)"),t()()(),e(44,"div",10)(45,"label",11),o(46,"\u{1F3AD} Tipo de Jogador *"),t(),e(47,"select",16),h("ngModelChange",function(l){return g(a),C(i.jogador.tipo_jogador,l)||(i.jogador.tipo_jogador=l),c(l)}),e(48,"option",15),o(49,"Selecione..."),t(),e(50,"option"),o(51,"Aventureiro"),t(),e(52,"option"),o(53,"Mestre"),t()()(),e(54,"h6",17),o(55,"\u{1F4CA} Atributos Num\xE9ricos"),t(),e(56,"div",18),v(57,ie,9,5,"div",19),t(),e(58,"h6",17),o(59,"\u2694\uFE0F Atributos Calculados"),t(),e(60,"div",20)(61,"div",21)(62,"span"),o(63,"\u2764\uFE0F Vida"),t(),e(64,"b"),o(65),t(),e(66,"small"),o(67,"(Energia + Constitui\xE7\xE3o)"),t()(),e(68,"div",21)(69,"span"),o(70,"\u{1F496} Vida Total"),t(),e(71,"b"),o(72),t(),e(73,"small"),o(74,"(Vida + Armadura)"),t()(),e(75,"div",21)(76,"span"),o(77,"\u2728 Fator de Cura"),t(),e(78,"b"),o(79),t(),e(80,"small"),o(81,"(Energia / 3)"),t()(),e(82,"div",21)(83,"span"),o(84,"\u{1F3C3} Deslocamento"),t(),e(85,"b"),o(86),t(),e(87,"small"),o(88,"(Destreza / 3)"),t()()()()()()(),e(89,"div",22)(90,"button",23),v(91,ne,2,0,"ng-container",24)(92,ae,2,0,"ng-container",24),t()()()}if(n&2){let a=S(7);d(5),u("ngIf",i.jogador.imagem)("ngIfElse",a),d(10),x("ngModel",i.jogador.nome_do_jogador),d(4),x("ngModel",i.jogador.personagem),d(4),x("ngModel",i.jogador.alinhamento),d(24),x("ngModel",i.jogador.tipo_jogador),d(10),u("ngForOf",i.atributosNumericos),d(8),_(i.vida),d(7),_(i.vidaTotal),d(7),_(i.fatorCura),d(7),_(i.deslocamento),d(4),u("disabled",i.salvando),d(),u("ngIf",!i.salvando),d(),u("ngIf",i.salvando)}},dependencies:[A,J,N,K,W,U,G,I,q,R,T,z,X,H,B,L],styles:[".detalhe-card[_ngcontent-%COMP%]{background:#1e1e1e;border-radius:12px;overflow:hidden}.detalhe-img[_ngcontent-%COMP%]{height:200px;object-fit:cover;border-radius:8px}.upload-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border:2px dashed #444;border-radius:12px;width:100%;height:140px;background:#1e1e1e;color:#6c757d;cursor:pointer;transition:border .2s ease,color .2s ease}.upload-box[_ngcontent-%COMP%]:hover{border-color:#0d6efd;color:#0d6efd}.input-dark[_ngcontent-%COMP%]{background:#1e1e1e;border:1px solid #444;color:#f8f9fa}.input-dark[_ngcontent-%COMP%]:focus{border-color:#0d6efd;box-shadow:0 0 0 .2rem #0d6efd40;outline:none}.atributos-grid-edit[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}@media (min-width: 768px){.atributos-grid-edit[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (min-width: 992px){.atributos-grid-edit[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}.atributo-item-edit[_ngcontent-%COMP%]{background:#2a2a2a;border-radius:6px;padding:8px 10px;display:flex;flex-direction:column;align-items:center}.atributo-label[_ngcontent-%COMP%]{font-weight:600;color:#f8f9fa;margin-bottom:6px;text-align:center}.atributo-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:6px}.atributo-input[_ngcontent-%COMP%]{width:60px;text-align:center;font-weight:700;color:#fff;background:#1e1e1e;border:1px solid #444;border-radius:4px;padding:2px 4px}.atributo-input[_ngcontent-%COMP%]:focus{border-color:#0d6efd;outline:none;box-shadow:0 0 0 .2rem #0d6efd40}.atributo-controls[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:2px 8px;font-size:.9rem;line-height:1}.atributos-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}@media (min-width: 768px){.atributos-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (min-width: 992px){.atributos-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}.atributo-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:#2a2a2a;border-radius:6px;padding:6px 10px;text-align:center}.atributo-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;color:#f8f9fa}.atributo-item[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#fff}.atributo-item[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.75rem;color:#aaa}.fab-stack[_ngcontent-%COMP%]{position:fixed;bottom:70px;right:20px;display:flex;flex-direction:column-reverse;gap:15px;z-index:1000}.fab[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%;font-size:1.4rem;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 14px #0006;transition:transform .2s ease,background .2s ease;border:none;cursor:pointer}.fab[_ngcontent-%COMP%]:hover{transform:scale(1.08)}.fab-warning[_ngcontent-%COMP%]{background:#ffc107;color:#000}.fab-warning[_ngcontent-%COMP%]:hover{background:#e0a800}"]})};export{ee as CadastroJogador};
