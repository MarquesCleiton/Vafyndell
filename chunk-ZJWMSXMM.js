import{a as f}from"./chunk-QWKS73CC.js";import{a as E}from"./chunk-TA2KEWZ6.js";import{c as F,f as J,g as W,h as B,i as q,j as U,k as L,p as z,r as G}from"./chunk-2MTP6EBK.js";import"./chunk-MPFUFSQ6.js";import{g as A,j as I,q as N,s as T}from"./chunk-HRLERFBW.js";import{$b as j,Db as x,Eb as y,Fb as D,Jb as p,Lb as V,Pa as R,Qa as d,Va as C,Vb as P,Zb as i,_b as k,ab as S,ac as O,cc as h,d as w,dc as b,ec as v,fb as _,ia as u,ja as m,wb as g,xb as a,yb as r,zb as M}from"./chunk-QQSIVCMV.js";function H(c,s){if(c&1&&M(0,"img",27),c&2){let e=V(2);g("src",e.jogador.imagem,R)}}function K(c,s){if(c&1&&(a(0,"div",19)(1,"div",20),_(2,H,1,1,"img",21),a(3,"div")(4,"h5",22),i(5),r(),a(6,"div",23)(7,"span",24),i(8),r(),a(9,"span",25),i(10),r(),a(11,"span",26),i(12),r()()()()()),c&2){let e=V();d(2),g("ngIf",e.jogador.imagem),d(3),k(e.jogador.personagem),d(3),O("\u2764\uFE0F ",e.JogadorUtils.getVidaAtual(e.jogador),"/",e.JogadorUtils.getVidaBase(e.jogador)),d(2),j("\u{1F4A5} ",e.jogador.dano_tomado||0),d(2),j("\u{1F6E1}\uFE0F ",e.jogador.classe_de_armadura||0)}}function Q(c,s){c&1&&(x(0),i(1,"\u{1F48A} Recuperar"),y())}function X(c,s){c&1&&(x(0),M(1,"span",28),i(2," Salvando... "),y())}var $=class c{constructor(s,e){this.route=s;this.router=e}jogador=null;recuperar=0;armadura=0;descricao="";salvando=!1;JogadorUtils=f;ngOnInit(){return w(this,null,function*(){let s=this.route.snapshot.paramMap.get("id");if(s){let e=yield E.getLocalJogadores();this.jogador=e.find(t=>String(t.id)===s)||null}})}incrementarVida(){this.recuperar++}decrementarVida(){this.recuperar=Math.max(0,this.recuperar-1)}incrementarArmadura(){this.armadura++}decrementarArmadura(){this.armadura=Math.max(0,this.armadura-1)}cancelar(){this.router.navigate(["/batalha"])}registrarRecuperacao(s){return w(this,null,function*(){if(this.jogador){this.salvando=!0;try{let e=f.getVidaBase(this.jogador),t=f.getVidaAtual(this.jogador),n=e-t;if(n<=0&&this.recuperar>0){alert(`\u26A0\uFE0F ${this.jogador.personagem} j\xE1 est\xE1 com a vida cheia!`),this.salvando=!1;return}if(this.recuperar>n){alert(`\u26A0\uFE0F N\xE3o \xE9 poss\xEDvel recuperar mais do que ${n} de vida!`),this.salvando=!1;return}if(this.recuperar<=0&&this.armadura<=0&&!this.descricao.trim()){alert("\u26A0\uFE0F Nenhuma altera\xE7\xE3o realizada. Ajuste a vida, armadura ou informe uma descri\xE7\xE3o."),this.salvando=!1;return}let l=Math.min(this.recuperar,n);l>0&&(this.jogador.dano_tomado=Math.max(0,(this.jogador.dano_tomado||0)-l)),this.armadura>0&&(this.jogador.classe_de_armadura=(this.jogador.classe_de_armadura||0)+this.armadura),yield E.updateJogador(this.jogador),alert(`\u2705 ${this.jogador.personagem} se recuperou!
\u2764\uFE0F Vida: ${f.getVidaAtual(this.jogador)}/${e}
\u{1F6E1}\uFE0F Armadura: ${this.jogador.classe_de_armadura}
`+(this.descricao?`\u{1F4DD} ${this.descricao}`:"")),this.router.navigate(["/batalha"])}catch(e){console.error("[Recuperacao] Erro ao registrar:",e),alert("\u274C Erro ao registrar recupera\xE7\xE3o.")}finally{this.salvando=!1}}})}static \u0275fac=function(e){return new(e||c)(C(N),C(T))};static \u0275cmp=S({type:c,selectors:[["app-recuperacao"]],decls:34,vars:7,consts:[["form","ngForm"],[1,"d-flex","flex-column","min-vh-100","bg-dark","text-light","p-3"],[3,"ngSubmit"],[1,"card","detalhe-card","shadow-lg","border-0"],[1,"card-body"],["class","preview-card mb-3",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-between","mb-3"],[1,"form-label","text-light","fw-bold","mb-0","me-3"],[1,"quantidade-box"],["type","button",1,"btn","btn-sm","btn-outline-light",3,"click"],["type","number","name","recuperar","min","0",1,"quantidade-input",3,"ngModelChange","ngModel"],["type","number","name","armadura","min","0",1,"quantidade-input",3,"ngModelChange","ngModel"],[1,"mb-3"],[1,"form-label","text-light","fw-bold"],["rows","2","name","descricao","placeholder","Ex: Recupera\xE7\xE3o lenta, magia de cura...",1,"form-control","bg-dark","text-light","border-light",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-between","mt-4"],["type","button",1,"btn","btn-outline-light","px-4",3,"click"],["type","submit",1,"btn","btn-save","px-4",3,"disabled"],[4,"ngIf"],[1,"preview-card","mb-3"],[1,"d-flex","align-items-center","justify-content-center"],["class","me-3 rounded","style","width: 60px; height: 60px; object-fit: cover;",3,"src",4,"ngIf"],[1,"fw-bold","text-light","mb-1"],[1,"status-line","mt-2"],[1,"vida"],[1,"dano"],[1,"armadura"],[1,"me-3","rounded",2,"width","60px","height","60px","object-fit","cover",3,"src"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(e,t){if(e&1){let n=D();a(0,"div",1)(1,"form",2,0),p("ngSubmit",function(){u(n);let o=P(2);return m(t.registrarRecuperacao(o))}),a(3,"div",3)(4,"div",4),_(5,K,13,6,"div",5),a(6,"div",6)(7,"label",7),i(8,"\u{1F48A} Recuperar Vida"),r(),a(9,"div",8)(10,"button",9),p("click",function(){return u(n),m(t.decrementarVida())}),i(11,"\u2212"),r(),a(12,"input",10),v("ngModelChange",function(o){return u(n),b(t.recuperar,o)||(t.recuperar=o),m(o)}),r(),a(13,"button",9),p("click",function(){return u(n),m(t.incrementarVida())}),i(14,"+"),r()()(),a(15,"div",6)(16,"label",7),i(17,"\u{1F6E1}\uFE0F Recuperar Armadura"),r(),a(18,"div",8)(19,"button",9),p("click",function(){return u(n),m(t.decrementarArmadura())}),i(20,"\u2212"),r(),a(21,"input",11),v("ngModelChange",function(o){return u(n),b(t.armadura,o)||(t.armadura=o),m(o)}),r(),a(22,"button",9),p("click",function(){return u(n),m(t.incrementarArmadura())}),i(23,"+"),r()()(),a(24,"div",12)(25,"label",13),i(26,"\u{1F4DD} Descri\xE7\xE3o"),r(),a(27,"textarea",14),v("ngModelChange",function(o){return u(n),b(t.descricao,o)||(t.descricao=o),m(o)}),r()(),a(28,"div",15)(29,"button",16),p("click",function(){return u(n),m(t.cancelar())}),i(30,"\u2B05 Cancelar"),r(),a(31,"button",17),_(32,Q,2,0,"ng-container",18)(33,X,3,0,"ng-container",18),r()()()()()()}e&2&&(d(5),g("ngIf",t.jogador),d(7),h("ngModel",t.recuperar),d(9),h("ngModel",t.armadura),d(6),h("ngModel",t.descricao),d(4),g("disabled",t.salvando),d(),g("ngIf",!t.salvando),d(),g("ngIf",t.salvando))},dependencies:[I,A,G,U,F,L,J,W,z,q,B],styles:[".detalhe-card[_ngcontent-%COMP%]{background:#1e1e1e;border-radius:.75rem}.preview-card[_ngcontent-%COMP%]{background:#6c757d33;border-radius:.5rem;padding:.75rem 1rem}.preview-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:.5rem;border:1px solid #6c757d}.status-line[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20px;font-weight:600;font-size:.9rem}.status-line[_ngcontent-%COMP%]   .vida[_ngcontent-%COMP%]{color:#ff4d6d}.status-line[_ngcontent-%COMP%]   .dano[_ngcontent-%COMP%]{color:#ffc107}.status-line[_ngcontent-%COMP%]   .armadura[_ngcontent-%COMP%]{color:#4da6ff}.quantidade-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem}.quantidade-input[_ngcontent-%COMP%]{width:70px;text-align:center;font-weight:700;border:1px solid #6c757d;border-radius:.4rem;background:#212529;color:#f8f9fa;padding:.25rem}.btn-save[_ngcontent-%COMP%]{background:#198754;color:#fff;font-weight:600;transition:all .2s ease-in-out}.btn-save[_ngcontent-%COMP%]:hover{background:#157347;transform:scale(1.03)}.btn-outline-light[_ngcontent-%COMP%]{border-color:#adb5bd}.btn-outline-light[_ngcontent-%COMP%]:hover{background:#adb5bd;color:#212529}"]})};export{$ as Recuperacao};
