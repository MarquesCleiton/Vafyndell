import{a as i}from"./chunk-XCJLXIYJ.js";var c=class{static STORAGE_KEY="user";static CLIENT_ID="338305920567-bhd608ebcip1u08qf0gb5f08o4je4dnp.apps.googleusercontent.com";static SCOPES="https://www.googleapis.com/auth/spreadsheets https://www.googleapis.com/auth/drive.file openid email profile";static signInWithGoogle(){return new Promise(e=>{if(typeof google>"u"||!google.accounts){console.error("Google Identity Services n\xE3o carregado."),e(null);return}google.accounts.oauth2.initTokenClient({client_id:this.CLIENT_ID,scope:this.SCOPES,callback:t=>i(this,null,function*(){if(t&&t.access_token)try{let o=yield(yield fetch("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:`Bearer ${t.access_token}`}})).json(),a=(yield(yield fetch(`https://oauth2.googleapis.com/tokeninfo?access_token=${t.access_token}`)).json()).id_token||"",n={name:o.name,email:o.email,picture:o.picture,accessToken:t.access_token,idToken:a};localStorage.setItem(this.STORAGE_KEY,JSON.stringify(n)),e(n)}catch(s){console.error("Erro ao buscar perfil/token:",s),e(null)}else console.error("N\xE3o foi poss\xEDvel obter access_token"),e(null)})}).requestAccessToken()})}static getUser(){let e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):null}static getAccessToken(){return this.getUser()?.accessToken||null}static getIdToken(){return this.getUser()?.idToken||null}static logout(){localStorage.removeItem(this.STORAGE_KEY)}static isAuthenticated(){return this.getUser()!==null}};export{c as a};
