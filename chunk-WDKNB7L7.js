import{a as m}from"./chunk-Z4LNTHFB.js";import"./chunk-IT5HYUXY.js";import{$ as a,H as h,I as _,J,K as D,P as o,Q as i,R as s,V as S,X as j,Y as C,a as b,aa as l,b as E,ba as g,c,ca as I,t as x,u as n,va as y,w as v,x as f}from"./chunk-XY4KCV2H.js";var F=(r,t)=>t.label;function T(r,t){r&1&&(o(0,"div",2),s(1,"div",6),o(2,"p",7),a(3,"Carregando jogador..."),i()())}function z(r,t){if(r&1&&(o(0,"div",15)(1,"div",16),a(2),i()()),r&2){let e=t.$implicit;n(2),I(" ",e.label,": ",e.value," ")}}function k(r,t){if(r&1&&(o(0,"div",3),s(1,"img",8),o(2,"div",9)(3,"h4",10),a(4),i(),o(5,"p",11),a(6),i(),o(7,"ul",12)(8,"li",13),a(9,"\u{1F3C5} N\xEDvel: "),o(10,"b"),a(11),i()(),o(12,"li",13),a(13,"\u2B50 XP: "),o(14,"b"),a(15),i()(),o(16,"li",13),a(17,"\u{1F496} Vida total: "),o(18,"b"),a(19),i()(),o(20,"li",13),a(21,"\u2764\uFE0F Vida: "),o(22,"b"),a(23),i(),a(24," | \u{1F6E1}\uFE0F Armadura: "),o(25,"b"),a(26),i()(),o(27,"li",13),a(28,"\u{1F494} Dano tomado: "),o(29,"b"),a(30),i()(),o(31,"li",13),a(32,"\u2728 Fator de cura: "),o(33,"b"),a(34),i()()(),o(35,"div",14),J(36,z,3,2,"div",15,F),i()()()),r&2){let e=C();n(),S("src",e.jogador.imagem,x),n(3),g("\u{1F9D9} ",e.jogador.personagem),n(2),g("\u2696\uFE0F ",e.jogador.alinhamento),n(5),l(e.jogador.nivel),n(4),l(e.jogador.xp),n(4),l(e.jogador.vida_total),n(4),l(e.jogador.pontos_de_vida),n(3),l(e.jogador.classe_de_armadura),n(4),l(e.jogador.dano_tomado),n(4),l(e.jogador.fator_cura),n(2),D(e.atributos)}}function N(r,t){r&1&&(o(0,"div",4),a(1,"Nenhum jogador encontrado. V\xE1 para o cadastro."),i())}var w=class r{constructor(t){this.router=t}jogador=null;atributos=[];loading=!0;ngOnInit(){return c(this,null,function*(){console.log("[Jogador] ngOnInit \u2192 carregando jogador...");try{let t=yield m.getLocalJogador();if(t)console.log("[Jogador] Jogador local encontrado:",t),this.setJogador(t),m.syncJogadores().then(e=>c(this,null,function*(){if(e){console.log("[Jogador] Cache atualizado. Recarregando jogador...");let d=yield m.getLocalJogador();d&&this.setJogador(d)}}));else{console.log("[Jogador] Nenhum jogador local. Tentando buscar online...");let e=yield m.forceFetchJogador();e?this.setJogador(e):(console.warn("[Jogador] Nenhum jogador encontrado online \u2192 redirecionando para o cadastro"),this.router.navigate(["/cadastro-jogador"]))}}catch(t){console.error("[Jogador] Erro ao carregar Jogador:",t),this.router.navigate(["/login"])}})}setJogador(t){let e=t.energia+t.constituicao,d=Math.floor(t.energia/3),u=e+t.classe_de_armadura,p=Math.floor(t.destreza/3);this.jogador=E(b({},t),{pontos_de_vida:e,fator_cura:d,vida_total:u,deslocamento:p}),this.atributos=[{label:"For\xE7a",value:t.forca,icon:"bi bi-hand-thumbs-up"},{label:"Destreza",value:t.destreza,icon:"bi bi-lightning"},{label:"Constitui\xE7\xE3o",value:t.constituicao,icon:"bi bi-shield"},{label:"Intelig\xEAncia",value:t.inteligencia,icon:"bi bi-motherboard"},{label:"Sabedoria",value:t.sabedoria,icon:"bi bi-eye"},{label:"Carisma",value:t.carisma,icon:"bi bi-emoji-smile"},{label:"Energia",value:t.energia,icon:"bi bi-lightning-charge"},{label:"Deslocamento",value:p,icon:"bi bi-arrow-right"}],this.loading=!1}editarJogador(){this.router.navigate(["/editar-jogador"])}static \u0275fac=function(e){return new(e||r)(v(y))};static \u0275cmp=f({type:r,selectors:[["app-jogador"]],decls:7,vars:1,consts:[[1,"d-flex","flex-column","min-vh-100","bg-dark","text-light"],[1,"flex-grow-1","pb-5"],[1,"text-center","py-5"],[1,"card","bg-dark","text-light","border-0","shadow-lg"],[1,"alert","alert-warning","mt-4"],[1,"btn","btn-primary","rounded-circle","shadow-lg","d-flex","align-items-center","justify-content-center",2,"position","fixed","bottom","25px","right","25px","width","60px","height","60px","font-size","1.5rem","z-index","1050",3,"click"],["role","status",1,"spinner-border","text-light"],[1,"mt-2"],["alt","Imagem do jogador",1,"card-img-top","object-fit-cover",2,"max-height","300px",3,"src"],[1,"card-body","pb-5"],[1,"card-title","fw-bold"],[1,"card-subtitle","text-light","mb-3"],[1,"list-group","list-group-flush"],[1,"list-group-item","bg-dark","text-light","border-0"],[1,"row","row-cols-2","g-2","mt-3"],[1,"col"],[1,"p-2","rounded","bg-secondary","text-light","text-center","fw-bold"]],template:function(e,d){e&1&&(o(0,"div",0)(1,"div",1),h(2,T,4,0,"div",2)(3,k,38,10,"div",3)(4,N,2,0,"div",4),i(),o(5,"button",5),j("click",function(){return d.editarJogador()}),a(6," \u270F\uFE0F "),i()()),e&2&&(n(2),_(d.loading?2:d.jogador?3:4))},encapsulation:2})};export{w as Jogador};
