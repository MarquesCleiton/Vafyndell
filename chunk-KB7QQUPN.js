import{a as E}from"./chunk-G3GD7RGI.js";import{b as W,e as O,f as B,g as z,h as R,i as L,j as q,l as U,m as G,n as H,o as X,p as K,q as Q}from"./chunk-6EPUS52O.js";import"./chunk-W7DVKRY2.js";import{a as Y}from"./chunk-HS244SCX.js";import{Ga as u,Ha as e,Ia as t,Ib as N,Ja as j,Jb as T,Mb as I,Na as w,Oa as y,Pa as b,Ra as _,S as g,T as c,Ta as p,Vb as P,bb as S,d as M,fb as i,gb as f,ha as V,ia as d,ib as J,kb as h,lb as x,ma as k,mb as C,nb as A,qa as D,sb as F,ua as v}from"./chunk-ILJPX4RU.js";function $(m,n){if(m&1){let a=b();w(0),j(1,"img",24),e(2,"button",25),_("click",function(){g(a);let r=p();return c(r.removerImagem())}),i(3,"\u2716"),t(),y()}if(m&2){let a=p();d(),u("src",a.jogador.imagem,V)}}function ee(m,n){if(m&1){let a=b();e(0,"label",26)(1,"span",27),i(2,"\u{1F4F7}"),t(),e(3,"input",28),_("change",function(r){g(a);let s=p();return c(s.onFileChange(r))}),t()()}}function te(m,n){if(m&1){let a=b();e(0,"div",29)(1,"label",11),i(2),t(),e(3,"div",30)(4,"input",31),_("ngModelChange",function(r){let s=g(a).$implicit,l=p();return c(l.setValor(s.key,r))}),t(),e(5,"div",32)(6,"button",33),_("click",function(){let r=g(a).$implicit,s=p();return c(s.ajustarValor(r.key,-1))}),i(7,"\u2212"),t(),e(8,"button",33),_("click",function(){let r=g(a).$implicit,s=p();return c(s.ajustarValor(r.key,1))}),i(9,"+"),t()()()()}if(m&2){let a=n.$implicit,o=p();d(2),J("",a.icon," ",a.label),d(2),u("name",A(a.key))("ngModel",o.getValor(a.key))}}function oe(m,n){m&1&&(w(0),i(1,"\u{1F4BE} Salvar"),y())}function ie(m,n){m&1&&(w(0),j(1,"span",34),i(2," Salvando... "),y())}var Z=class m{constructor(n){this.router=n}jogador={index:0,id:0,email:"",imagem:"",nome_do_jogador:"",personagem:"",pontos_de_vida:0,alinhamento:"",classe_de_armadura:0,forca:0,destreza:0,constituicao:0,inteligencia:0,sabedoria:0,carisma:0,energia:0,nivel:1,xp:0,dano_tomado:0,tipo_jogador:"",efeitos_temporarios:"",registo_de_jogo:"",classificacao:"",tipo:"",descricao:"",ataques:""};atributosNumericos=[{key:"nivel",label:"N\xEDvel",icon:"\u{1F3C5}"},{key:"xp",label:"XP",icon:"\u2B50"},{key:"forca",label:"For\xE7a",icon:"\u{1F4AA}"},{key:"destreza",label:"Destreza",icon:"\u{1F3C3}"},{key:"constituicao",label:"Constitui\xE7\xE3o",icon:"\u{1F6E1}\uFE0F"},{key:"inteligencia",label:"Intelig\xEAncia",icon:"\u{1F9E0}"},{key:"sabedoria",label:"Sabedoria",icon:"\u{1F4D6}"},{key:"carisma",label:"Carisma",icon:"\u{1F60E}"},{key:"energia",label:"Energia",icon:"\u26A1"},{key:"classe_de_armadura",label:"Armadura",icon:"\u{1F6E1}\uFE0F"}];salvando=!1;get vida(){return this.jogador.energia+this.jogador.constituicao}get vidaTotal(){return this.vida+this.jogador.classe_de_armadura}get fatorCura(){return Math.floor(this.jogador.energia/3)}get deslocamento(){return Math.floor(this.jogador.destreza/3)}getValor(n){return this.jogador[n]}setValor(n,a){this.jogador[n]=Math.max(0,a)}ajustarValor(n,a){this.setValor(n,this.getValor(n)+a)}onFileChange(n){let a=n.target;if(a.files&&a.files.length>0){let o=a.files[0],r=new FileReader;r.onload=()=>{this.jogador.imagem=r.result},r.readAsDataURL(o)}}removerImagem(){this.jogador.imagem=""}salvar(n){return M(this,null,function*(){if(!n.invalid)try{this.salvando=!0;let a=Y.getUser();if(!a?.email)throw new Error("Usu\xE1rio n\xE3o autenticado");this.jogador.email=a.email,yield E.syncJogadores();let o=yield E.getAllJogadores(),r=0;o.length>0&&(r=Math.max(...o.map(s=>s.index||0))),this.jogador.index=r+1,this.jogador.id=r+1,yield E.createJogador(this.jogador),window.alert("\u2705 Jogador salvo com sucesso!"),this.router.navigate(["/jogador"])}catch(a){console.error("[CadastroJogador] Erro ao salvar:",a),window.alert("\u274C Erro ao salvar jogador. Veja o console.")}finally{this.salvando=!1}})}static \u0275fac=function(a){return new(a||m)(k(P))};static \u0275cmp=D({type:m,selectors:[["app-cadastro-jogador"]],decls:78,vars:14,consts:[["form","ngForm"],["uploadBox",""],[1,"d-flex","flex-column","min-vh-100","bg-dark","text-light"],[1,"flex-grow-1","pb-5"],[3,"ngSubmit"],[1,"position-relative","text-center","mb-3"],[4,"ngIf","ngIfElse"],[1,"card","bg-dark","border-0","shadow-sm"],[1,"card-body"],[1,"fw-bold","mb-3","text-white"],[1,"mb-3"],[1,"form-label","text-white"],["type","text","name","nomeJogador","required","",1,"form-control","bg-dark","text-light","border-light",3,"ngModelChange","ngModel"],["type","text","name","personagem","required","",1,"form-control","bg-dark","text-light","border-light",3,"ngModelChange","ngModel"],["name","alinhamento","required","",1,"form-select","bg-dark","text-light","border-light",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],["name","tipoJogador","required","",1,"form-select","bg-dark","text-light","border-light",3,"ngModelChange","ngModel"],[1,"row","row-cols-2","g-3","mt-3"],["class","col",4,"ngFor","ngForOf"],[1,"card","bg-secondary","text-light","mt-4"],[1,"fw-bold"],[1,"text-end","mt-4"],["type","submit",1,"btn","btn-success","px-4",3,"disabled"],[4,"ngIf"],["alt","Preview",1,"w-100","rounded","shadow-sm",2,"height","250px","object-fit","cover",3,"src"],["type","button",1,"btn","btn-danger","rounded-circle","position-absolute","d-flex","align-items-center","justify-content-center",2,"top","10px","right","10px","width","40px","height","40px",3,"click"],[1,"d-flex","align-items-center","justify-content-center","border","rounded","w-100",2,"height","150px","background","#1e1e1e","cursor","pointer"],[1,"text-success","fs-1"],["type","file","accept","image/*",1,"d-none",3,"change"],[1,"col"],[1,"input-group"],["type","number","min","0",1,"form-control","text-center","bg-dark","text-white","border-light","fw-bold",3,"ngModelChange","ngModel","name"],[1,"d-flex"],["type","button",1,"btn","btn-outline-light",3,"click"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(a,o){if(a&1){let r=b();e(0,"div",2)(1,"div",3)(2,"form",4,0),_("ngSubmit",function(){g(r);let l=S(3);return c(o.salvar(l))}),e(4,"div",5),v(5,$,4,1,"ng-container",6)(6,ee,4,0,"ng-template",null,1,F),t(),e(8,"div",7)(9,"div",8)(10,"h4",9),i(11,"\u{1F4DC} Cadastro de Personagem"),t(),e(12,"div",10)(13,"label",11),i(14,"\u{1F64D} Nome do Jogador *"),t(),e(15,"input",12),C("ngModelChange",function(l){return g(r),x(o.jogador.nome_do_jogador,l)||(o.jogador.nome_do_jogador=l),c(l)}),t()(),e(16,"div",10)(17,"label",11),i(18,"\u{1F9D9} Nome do Personagem *"),t(),e(19,"input",13),C("ngModelChange",function(l){return g(r),x(o.jogador.personagem,l)||(o.jogador.personagem=l),c(l)}),t()(),e(20,"div",10)(21,"label",11),i(22,"\u2696\uFE0F Alinhamento *"),t(),e(23,"select",14),C("ngModelChange",function(l){return g(r),x(o.jogador.alinhamento,l)||(o.jogador.alinhamento=l),c(l)}),e(24,"option",15),i(25,"Selecione..."),t(),e(26,"option"),i(27,"Leal e Bom"),t(),e(28,"option"),i(29,"Neutro"),t(),e(30,"option"),i(31,"Ca\xF3tico e Bom"),t(),e(32,"option"),i(33,"Ca\xF3tico e Mau"),t()()(),e(34,"div",10)(35,"label",11),i(36,"\u{1F3AD} Tipo de Jogador *"),t(),e(37,"select",16),C("ngModelChange",function(l){return g(r),x(o.jogador.tipo_jogador,l)||(o.jogador.tipo_jogador=l),c(l)}),e(38,"option",15),i(39,"Selecione..."),t(),e(40,"option"),i(41,"Aventureiro"),t(),e(42,"option"),i(43,"Mestre"),t()()(),e(44,"div",17),v(45,te,10,5,"div",18),t(),e(46,"div",19)(47,"div",8)(48,"h5",20),i(49,"\u2694\uFE0F Atributos calculados"),t(),e(50,"p"),i(51,"\u2764\uFE0F Vida: "),e(52,"b"),i(53),t(),e(54,"small"),i(55," (Energia + Constitui\xE7\xE3o)"),t()(),e(56,"p"),i(57,"\u{1F496} Vida Total: "),e(58,"b"),i(59),t(),e(60,"small"),i(61," (Vida + Armadura)"),t()(),e(62,"p"),i(63,"\u2728 Fator de Cura: "),e(64,"b"),i(65),t(),e(66,"small"),i(67," (Energia / 3)"),t()(),e(68,"p"),i(69,"\u{1F3C3} Deslocamento: "),e(70,"b"),i(71),t(),e(72,"small"),i(73," (Destreza / 3)"),t()()()()()(),e(74,"div",21)(75,"button",22),v(76,oe,2,0,"ng-container",23)(77,ie,3,0,"ng-container",23),t()()()()()}if(a&2){let r=S(3),s=S(7);d(5),u("ngIf",o.jogador.imagem)("ngIfElse",s),d(10),h("ngModel",o.jogador.nome_do_jogador),d(4),h("ngModel",o.jogador.personagem),d(4),h("ngModel",o.jogador.alinhamento),d(14),h("ngModel",o.jogador.tipo_jogador),d(8),u("ngForOf",o.atributosNumericos),d(8),f(o.vida),d(6),f(o.vidaTotal),d(6),f(o.fatorCura),d(6),f(o.deslocamento),d(4),u("disabled",r.invalid||o.salvando),d(),u("ngIf",!o.salvando),d(),u("ngIf",o.salvando)}},dependencies:[I,N,T,Q,L,G,H,W,q,U,O,B,K,X,R,z],styles:[".upload-box[_ngcontent-%COMP%]{border:2px dashed #666;border-radius:8px;background-color:#1e1e1e;height:150px;display:flex;flex-direction:column;justify-content:center;align-items:center;cursor:pointer;transition:background-color .2s,border-color .2s}.upload-box[_ngcontent-%COMP%]:hover{background-color:#2a2a2a;border-color:#999}.upload-icon[_ngcontent-%COMP%]{font-size:2rem;color:#28a745}.image-preview[_ngcontent-%COMP%]{position:relative;display:inline-block}.preview-img[_ngcontent-%COMP%]{width:100%;max-height:200px;object-fit:cover;border-radius:8px;border:1px solid #444}.remove-btn[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;border-radius:50%;padding:4px 8px}"]})};export{Z as CadastroJogador};
