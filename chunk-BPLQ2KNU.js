import{a as c}from"./chunk-KYB7LNT6.js";import"./chunk-IT5HYUXY.js";import{$ as o,B as E,H as D,I as S,J as C,K as I,L as g,M as a,N as n,O as s,S as j,T as y,W as w,Y as u,a as v,aa as d,b as f,ba as p,c as m,ca as F,ra as T,sa as z,t as h,u as r,va as k,w as _,x as J}from"./chunk-XY4KCV2H.js";var M=(i,e)=>e.label;function O(i,e){i&1&&(a(0,"div",2),s(1,"div",6),a(2,"p",7),o(3,"Carregando jogador..."),n()())}function R(i,e){if(i&1&&(j(0),s(1,"img",16),y()),i&2){let t=u(2);r(),g("src",t.jogador.imagem,h)}}function L(i,e){if(i&1&&(a(0,"div",15)(1,"div",17),o(2),n()()),i&2){let t=e.$implicit;r(2),F(" ",t.label,": ",t.value," ")}}function V(i,e){if(i&1&&(a(0,"div",3),E(1,R,2,1,"ng-container",8),a(2,"div",9)(3,"h4",10),o(4),n(),a(5,"p",11),o(6),n(),a(7,"ul",12)(8,"li",13),o(9,"\u{1F3C5} N\xEDvel: "),a(10,"b"),o(11),n()(),a(12,"li",13),o(13,"\u2B50 XP: "),a(14,"b"),o(15),n()(),a(16,"li",13),o(17,"\u{1F496} Vida total: "),a(18,"b"),o(19),n()(),a(20,"li",13),o(21,"\u2764\uFE0F Vida: "),a(22,"b"),o(23),n(),o(24," | \u{1F6E1}\uFE0F Armadura: "),a(25,"b"),o(26),n()(),a(27,"li",13),o(28,"\u{1F494} Dano tomado: "),a(29,"b"),o(30),n()(),a(31,"li",13),o(32,"\u2728 Fator de cura: "),a(33,"b"),o(34),n()()(),a(35,"div",14),C(36,L,3,2,"div",15,M),n()()()),i&2){let t=u();r(),g("ngIf",t.jogador.imagem),r(3),p("\u{1F9D9} ",t.jogador.personagem),r(2),p("\u2696\uFE0F ",t.jogador.alinhamento),r(5),d(t.jogador.nivel),r(4),d(t.jogador.xp),r(4),d(t.jogador.vida_total),r(4),d(t.jogador.pontos_de_vida),r(3),d(t.jogador.classe_de_armadura),r(4),d(t.jogador.dano_tomado),r(4),d(t.jogador.fator_cura),r(2),I(t.atributos)}}function P(i,e){i&1&&(a(0,"div",4),o(1,"Nenhum jogador encontrado. V\xE1 para o cadastro."),n())}var N=class i{constructor(e){this.router=e}jogador=null;atributos=[];loading=!0;ngOnInit(){return m(this,null,function*(){console.log("[Jogador] ngOnInit \u2192 carregando jogador...");try{let e=yield c.getLocalJogador();if(e)console.log("[Jogador] Jogador local encontrado:",e),this.setJogador(e),c.syncJogadores().then(t=>m(this,null,function*(){if(t){console.log("[Jogador] Cache atualizado. Recarregando jogador...");let l=yield c.getLocalJogador();l&&this.setJogador(l)}}));else{console.log("[Jogador] Nenhum jogador local. Tentando buscar online...");let t=yield c.forceFetchJogador();t?this.setJogador(t):(console.warn("[Jogador] Nenhum jogador encontrado online \u2192 redirecionando para o cadastro"),this.router.navigate(["/cadastro-jogador"]))}}catch(e){console.error("[Jogador] Erro ao carregar Jogador:",e),this.router.navigate(["/login"])}})}setJogador(e){let t=e.energia+e.constituicao,l=Math.floor(e.energia/3),b=t+e.classe_de_armadura,x=Math.floor(e.destreza/3);this.jogador=f(v({},e),{pontos_de_vida:t,fator_cura:l,vida_total:b,deslocamento:x}),this.atributos=[{label:"For\xE7a",value:e.forca,icon:"bi bi-hand-thumbs-up"},{label:"Destreza",value:e.destreza,icon:"bi bi-lightning"},{label:"Constitui\xE7\xE3o",value:e.constituicao,icon:"bi bi-shield"},{label:"Intelig\xEAncia",value:e.inteligencia,icon:"bi bi-motherboard"},{label:"Sabedoria",value:e.sabedoria,icon:"bi bi-eye"},{label:"Carisma",value:e.carisma,icon:"bi bi-emoji-smile"},{label:"Energia",value:e.energia,icon:"bi bi-lightning-charge"},{label:"Deslocamento",value:x,icon:"bi bi-arrow-right"}],this.loading=!1}editarJogador(){this.router.navigate(["/edicao-jogador"])}static \u0275fac=function(t){return new(t||i)(_(k))};static \u0275cmp=J({type:i,selectors:[["app-jogador"]],decls:7,vars:1,consts:[[1,"d-flex","flex-column","min-vh-100","bg-dark","text-light"],[1,"flex-grow-1","pb-5"],[1,"text-center","py-5"],[1,"card","bg-dark","text-light","border-0","shadow-lg"],[1,"alert","alert-warning","mt-4"],[1,"btn","btn-primary","rounded-circle","shadow-lg","d-flex","align-items-center","justify-content-center",2,"position","fixed","bottom","25px","right","25px","width","60px","height","60px","font-size","1.5rem","z-index","1050",3,"click"],["role","status",1,"spinner-border","text-light"],[1,"mt-2"],[4,"ngIf"],[1,"card-body","pb-5"],[1,"card-title","fw-bold"],[1,"card-subtitle","text-light","mb-3"],[1,"list-group","list-group-flush"],[1,"list-group-item","bg-dark","text-light","border-0"],[1,"row","row-cols-2","g-2","mt-3"],[1,"col"],["alt","Imagem do jogador",1,"card-img-top","object-fit-cover",2,"max-height","300px",3,"src"],[1,"p-2","rounded","bg-secondary","text-light","text-center","fw-bold"]],template:function(t,l){t&1&&(a(0,"div",0)(1,"div",1),D(2,O,4,0,"div",2)(3,V,38,10,"div",3)(4,P,2,0,"div",4),n(),a(5,"button",5),w("click",function(){return l.editarJogador()}),o(6," \u270F\uFE0F "),n()()),t&2&&(r(2),S(l.loading?2:l.jogador?3:4))},dependencies:[z,T],encapsulation:2})};export{N as Jogador};
