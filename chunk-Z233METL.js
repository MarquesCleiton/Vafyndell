import{a as S}from"./chunk-FJZA3HMC.js";import{b as N,e as T,f as z,g as B,h as W,i as R,j as L,l as q,m as U,n as G,o as H,p as X,q as Y}from"./chunk-6EPUS52O.js";import"./chunk-W7DVKRY2.js";import{a as K}from"./chunk-HS244SCX.js";import{Ga as u,Ha as e,Ia as n,Ib as F,Ja as M,Jb as J,Mb as A,Na as x,Oa as h,Pa as f,Ra as p,S as m,T as g,Ta as s,Vb as I,bb as C,d as y,fb as o,gb as b,ha as j,ia as c,ib as P,kb as v,lb as E,ma as V,mb as w,nb as O,qa as k,sb as D,ua as _}from"./chunk-ILJPX4RU.js";function $(l,r){if(l&1){let i=f();x(0),M(1,"img",26),e(2,"button",27),p("click",function(){m(i);let t=s(2);return g(t.removerImagem())}),o(3,"\u2716"),n(),h()}if(l&2){let i=s(2);c(),u("src",i.jogador.imagem,j)}}function ee(l,r){if(l&1){let i=f();e(0,"label",28)(1,"span",29),o(2,"\u{1F4F7}"),n(),e(3,"input",30),p("change",function(t){m(i);let a=s(2);return g(a.onFileChange(t))}),n()()}}function te(l,r){if(l&1){let i=f();e(0,"div",31)(1,"div",32),o(2),n(),e(3,"div",33)(4,"button",34),p("click",function(){let t=m(i).$implicit,a=s(2);return g(a.ajustarValor(t.key,-1))}),o(5,"\u2212"),n(),e(6,"input",35),p("ngModelChange",function(t){let a=m(i).$implicit,Z=s(2);return g(Z.setValor(a.key,t))}),n(),e(7,"button",34),p("click",function(){let t=m(i).$implicit,a=s(2);return g(a.ajustarValor(t.key,1))}),o(8,"+"),n()()()}if(l&2){let i=r.$implicit,d=s(2);c(2),P(" ",i.icon," ",i.label," "),c(4),u("name",O(i.key))("ngModel",d.getValor(i.key))}}function ie(l,r){l&1&&(x(0),o(1,"\u{1F4BE} Atualizar"),h())}function ne(l,r){l&1&&(x(0),M(1,"span",36),o(2," Salvando... "),h())}function oe(l,r){if(l&1){let i=f();e(0,"form",5,0),p("ngSubmit",function(){m(i);let t=C(1),a=s();return g(a.salvar(t))}),e(2,"div",6),_(3,$,4,1,"ng-container",7)(4,ee,4,0,"ng-template",null,1,D),n(),e(6,"div",8)(7,"div",9)(8,"h4",10),o(9,"\u270F\uFE0F Edi\xE7\xE3o de Personagem"),n(),e(10,"div",11)(11,"label",12),o(12,"\u{1F9D9} Nome do Personagem *"),n(),e(13,"input",13),w("ngModelChange",function(t){m(i);let a=s();return E(a.jogador.personagem,t)||(a.jogador.personagem=t),g(t)}),n()(),e(14,"div",11)(15,"label",12),o(16,"\u2696\uFE0F Alinhamento *"),n(),e(17,"select",14),w("ngModelChange",function(t){m(i);let a=s();return E(a.jogador.alinhamento,t)||(a.jogador.alinhamento=t),g(t)}),e(18,"option",15),o(19,"Selecione..."),n(),e(20,"option"),o(21,"Leal e Bom"),n(),e(22,"option"),o(23,"Neutro"),n(),e(24,"option"),o(25,"Ca\xF3tico e Bom"),n(),e(26,"option"),o(27,"Ca\xF3tico e Mau"),n()()(),e(28,"div",11)(29,"label",12),o(30,"\u{1F3AD} Tipo de Jogador *"),n(),e(31,"select",16),w("ngModelChange",function(t){m(i);let a=s();return E(a.jogador.tipo_jogador,t)||(a.jogador.tipo_jogador=t),g(t)}),e(32,"option",15),o(33,"Selecione..."),n(),e(34,"option"),o(35,"Aventureiro"),n(),e(36,"option"),o(37,"Mestre"),n()()(),e(38,"h6",17),o(39,"\u{1F4CA} Atributos Num\xE9ricos"),n(),e(40,"div",18),_(41,te,9,5,"div",19),n(),e(42,"h6",17),o(43,"\u2694\uFE0F Atributos Calculados"),n(),e(44,"div",20)(45,"div",21)(46,"span"),o(47,"\u2764\uFE0F Vida"),n(),e(48,"b"),o(49),n(),e(50,"small"),o(51,"(Energia + Constitui\xE7\xE3o)"),n()(),e(52,"div",21)(53,"span"),o(54,"\u{1F496} Vida Total"),n(),e(55,"b"),o(56),n(),e(57,"small"),o(58,"(Vida + Armadura)"),n()(),e(59,"div",21)(60,"span"),o(61,"\u2728 Fator de Cura"),n(),e(62,"b"),o(63),n(),e(64,"small"),o(65,"(Energia / 3)"),n()(),e(66,"div",21)(67,"span"),o(68,"\u{1F3C3} Deslocamento"),n(),e(69,"b"),o(70),n(),e(71,"small"),o(72,"(Destreza / 3)"),n()()(),e(73,"div",22)(74,"button",23),p("click",function(){m(i);let t=s();return g(t.cancelar())}),o(75,"\u2B05 Cancelar"),n(),e(76,"button",24),_(77,ie,2,0,"ng-container",25)(78,ne,3,0,"ng-container",25),n()()()()()}if(l&2){let i=C(1),d=C(5),t=s();c(3),u("ngIf",t.jogador.imagem)("ngIfElse",d),c(10),v("ngModel",t.jogador.personagem),c(4),v("ngModel",t.jogador.alinhamento),c(14),v("ngModel",t.jogador.tipo_jogador),c(10),u("ngForOf",t.atributosNumericos),c(8),b(t.vida),c(7),b(t.vidaTotal),c(7),b(t.fatorCura),c(7),b(t.deslocamento),c(6),u("disabled",i.invalid||t.salvando),c(),u("ngIf",!t.salvando),c(),u("ngIf",t.salvando)}}var Q=class l{constructor(r){this.router=r}jogador=null;salvando=!1;atributosNumericos=[{key:"nivel",label:"N\xEDvel",icon:"\u{1F3C5}"},{key:"xp",label:"XP",icon:"\u2B50"},{key:"forca",label:"For\xE7a",icon:"\u{1F4AA}"},{key:"destreza",label:"Destreza",icon:"\u{1F3C3}"},{key:"constituicao",label:"Constitui\xE7\xE3o",icon:"\u{1FAA8}"},{key:"inteligencia",label:"Intelig\xEAncia",icon:"\u{1F9E0}"},{key:"sabedoria",label:"Sabedoria",icon:"\u{1F4D6}"},{key:"carisma",label:"Carisma",icon:"\u{1F60E}"},{key:"energia",label:"Energia",icon:"\u26A1"},{key:"classe_de_armadura",label:"Armadura",icon:"\u{1F6E1}\uFE0F"}];get vida(){return this.jogador?this.jogador.energia+this.jogador.constituicao:0}get vidaTotal(){return this.jogador?this.vida+this.jogador.classe_de_armadura:0}get fatorCura(){return this.jogador?Math.floor(this.jogador.energia/3):0}get deslocamento(){return this.jogador?Math.floor(this.jogador.destreza/3):0}getValor(r){return this.jogador?this.jogador[r]:0}setValor(r,i){this.jogador&&(this.jogador[r]=Math.max(0,i))}ajustarValor(r,i){this.setValor(r,this.getValor(r)+i)}onFileChange(r){let i=r.target;if(i.files&&i.files.length>0&&this.jogador){let d=i.files[0],t=new FileReader;t.onload=()=>{this.jogador&&(this.jogador.imagem=t.result)},t.readAsDataURL(d)}}removerImagem(){this.jogador&&(this.jogador.imagem="")}salvar(r){return y(this,null,function*(){if(!(r.invalid||!this.jogador))try{this.salvando=!0;let i=K.getUser();if(!i?.email)throw new Error("Usu\xE1rio n\xE3o autenticado");this.jogador.email=i.email,yield S.updateJogador(this.jogador),window.alert("\u2705 Jogador atualizado com sucesso!"),this.router.navigate(["/jogador"])}catch(i){console.error("[EdicaoJogador] Erro ao salvar:",i),window.alert("\u274C Erro ao salvar jogador. Veja o console.")}finally{this.salvando=!1}})}ngOnInit(){return y(this,null,function*(){let r=yield S.getCurrentJogador();if(!r){window.alert("Nenhum jogador encontrado. V\xE1 para o cadastro primeiro."),this.router.navigate(["/cadastro"]);return}this.jogador=r})}cancelar(){this.router.navigate(["/jogador"])}static \u0275fac=function(i){return new(i||l)(V(I))};static \u0275cmp=k({type:l,selectors:[["app-edicao-jogador"]],decls:3,vars:1,consts:[["form","ngForm"],["uploadBox",""],[1,"d-flex","flex-column","min-vh-100","bg-dark","text-light"],[1,"flex-grow-1","pb-5"],[3,"ngSubmit",4,"ngIf"],[3,"ngSubmit"],[1,"position-relative","text-center","mb-3"],[4,"ngIf","ngIfElse"],[1,"card","detalhe-card","shadow-lg","border-0"],[1,"card-body"],[1,"fw-bold","mb-3","text-light"],[1,"mb-3"],[1,"form-label","text-light"],["type","text","name","personagem","required","",1,"form-control","input-dark",3,"ngModelChange","ngModel"],["name","alinhamento","required","",1,"form-select","input-dark",3,"ngModelChange","ngModel"],["value","","disabled",""],["name","tipoJogador","required","",1,"form-select","input-dark",3,"ngModelChange","ngModel"],[1,"fw-bold","mt-4","text-light"],[1,"atributos-grid-edit","mb-3"],["class","atributo-item-edit",4,"ngFor","ngForOf"],[1,"atributos-grid","mb-3"],[1,"atributo-item"],[1,"d-flex","justify-content-between","mt-4"],["type","button",1,"btn","btn-outline-light","w-45",3,"click"],["type","submit",1,"btn","btn-save","w-45",3,"disabled"],[4,"ngIf"],["alt","Preview",1,"w-100","rounded","detalhe-img","shadow-sm",3,"src"],["type","button",1,"btn","btn-danger","rounded-circle","position-absolute","d-flex","align-items-center","justify-content-center",2,"top","10px","right","10px","width","40px","height","40px",3,"click"],[1,"upload-box"],[1,"fs-1"],["type","file","accept","image/*",1,"d-none",3,"change"],[1,"atributo-item-edit"],[1,"atributo-label","text-center"],[1,"atributo-controls"],["type","button",1,"btn","btn-sm","btn-outline-light",3,"click"],["type","number","min","0",1,"atributo-input",3,"ngModelChange","ngModel","name"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(i,d){i&1&&(e(0,"div",2)(1,"div",3),_(2,oe,79,13,"form",4),n()()),i&2&&(c(2),u("ngIf",d.jogador))},dependencies:[A,F,J,Y,R,U,G,N,L,q,T,z,X,H,W,B],styles:[".detalhe-card[_ngcontent-%COMP%]{background:#1e1e1e;border-radius:12px;overflow:hidden}.detalhe-img[_ngcontent-%COMP%]{height:200px;object-fit:cover;border-radius:8px}.upload-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border:2px dashed #444;border-radius:12px;width:100%;height:140px;background:#1e1e1e;color:#6c757d;cursor:pointer;transition:border .2s ease,color .2s ease}.upload-box[_ngcontent-%COMP%]:hover{border-color:#0d6efd;color:#0d6efd}.input-dark[_ngcontent-%COMP%]{background:#1e1e1e;border:1px solid #444;color:#f8f9fa}.input-dark[_ngcontent-%COMP%]:focus{border-color:#0d6efd;box-shadow:0 0 0 .2rem #0d6efd40;outline:none}.atributos-grid-edit[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}@media (min-width: 768px){.atributos-grid-edit[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (min-width: 992px){.atributos-grid-edit[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}.atributo-item-edit[_ngcontent-%COMP%]{background:#2a2a2a;border-radius:6px;padding:8px 10px;display:flex;flex-direction:column;align-items:center}.atributo-label[_ngcontent-%COMP%]{font-weight:600;color:#f8f9fa;margin-bottom:6px;text-align:center}.atributo-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:6px}.atributo-input[_ngcontent-%COMP%]{width:60px;text-align:center;font-weight:700;color:#fff;background:#1e1e1e;border:1px solid #444;border-radius:4px;padding:2px 4px}.atributo-input[_ngcontent-%COMP%]:focus{border-color:#0d6efd;outline:none;box-shadow:0 0 0 .2rem #0d6efd40}.atributo-controls[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:2px 8px;font-size:.9rem;line-height:1}.atributos-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}@media (min-width: 768px){.atributos-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (min-width: 992px){.atributos-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}.atributo-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:#2a2a2a;border-radius:6px;padding:6px 10px;text-align:center}.atributo-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;color:#f8f9fa}.atributo-item[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#fff}.atributo-item[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.75rem;color:#aaa}.btn-save[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#218838);border:none;color:#fff;font-weight:600;display:flex;align-items:center;justify-content:center;gap:6px;transition:all .2s ease-in-out}.btn-save[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#34d058,#28a745);transform:translateY(-2px);box-shadow:0 4px 10px #0000004d}.btn-save[_ngcontent-%COMP%]:disabled{background:#444!important;color:#bbb!important;cursor:not-allowed;box-shadow:none}.btn-save[_ngcontent-%COMP%]{margin-left:auto}"]})};export{Q as EdicaoJogador};
