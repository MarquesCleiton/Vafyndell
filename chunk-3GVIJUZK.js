import{a as j}from"./chunk-FJZA3HMC.js";import{b as P,e as W,f as z,g as B,h as O,i as R,j as L,l as q,m as U,n as G,o as H,p as X,q as K}from"./chunk-6EPUS52O.js";import"./chunk-W7DVKRY2.js";import{a as Q}from"./chunk-HS244SCX.js";import{Ga as u,Ha as t,Ia as o,Ib as A,Ja as y,Jb as I,Mb as T,Na as b,Oa as h,Pa as f,Ra as p,S as m,T as g,Ta as c,Vb as N,bb as v,d as w,fb as n,gb as x,ha as V,ia as s,ib as D,kb as E,lb as C,ma as k,mb as S,nb as F,qa as M,sb as J,ua as _}from"./chunk-ILJPX4RU.js";function $(l,r){if(l&1){let i=f();b(0),y(1,"img",26),t(2,"button",27),p("click",function(){m(i);let e=c(2);return g(e.removerImagem())}),n(3,"\u2716"),o(),h()}if(l&2){let i=c(2);s(),u("src",i.jogador.imagem,V)}}function ee(l,r){if(l&1){let i=f();t(0,"label",28)(1,"span",29),n(2,"\u{1F4F7}"),o(),t(3,"input",30),p("change",function(e){m(i);let a=c(2);return g(a.onFileChange(e))}),o()()}}function te(l,r){if(l&1){let i=f();t(0,"div",31)(1,"label",12),n(2),o(),t(3,"div",32)(4,"input",33),p("ngModelChange",function(e){let a=m(i).$implicit,Z=c(2);return g(Z.setValor(a.key,e))}),o(),t(5,"button",34),p("click",function(){let e=m(i).$implicit,a=c(2);return g(a.ajustarValor(e.key,-1))}),n(6,"\u2212"),o(),t(7,"button",34),p("click",function(){let e=m(i).$implicit,a=c(2);return g(a.ajustarValor(e.key,1))}),n(8,"+"),o()()()}if(l&2){let i=r.$implicit,d=c(2);s(2),D("",i.icon," ",i.label),s(2),u("name",F(i.key))("ngModel",d.getValor(i.key))}}function ie(l,r){l&1&&(b(0),n(1,"\u{1F4BE} Atualizar"),h())}function oe(l,r){l&1&&(b(0),y(1,"span",35),n(2," Salvando... "),h())}function ne(l,r){if(l&1){let i=f();t(0,"form",5,0),p("ngSubmit",function(){m(i);let e=v(1),a=c();return g(a.salvar(e))}),t(2,"div",6),_(3,$,4,1,"ng-container",7)(4,ee,4,0,"ng-template",null,1,J),o(),t(6,"div",8)(7,"div",9)(8,"h4",10),n(9,"\u270F\uFE0F Edi\xE7\xE3o de Personagem"),o(),t(10,"div",11)(11,"label",12),n(12,"\u{1F9D9} Nome do Personagem *"),o(),t(13,"input",13),S("ngModelChange",function(e){m(i);let a=c();return C(a.jogador.personagem,e)||(a.jogador.personagem=e),g(e)}),o()(),t(14,"div",11)(15,"label",12),n(16,"\u2696\uFE0F Alinhamento *"),o(),t(17,"select",14),S("ngModelChange",function(e){m(i);let a=c();return C(a.jogador.alinhamento,e)||(a.jogador.alinhamento=e),g(e)}),t(18,"option",15),n(19,"Selecione..."),o(),t(20,"option"),n(21,"Leal e Bom"),o(),t(22,"option"),n(23,"Neutro"),o(),t(24,"option"),n(25,"Ca\xF3tico e Bom"),o(),t(26,"option"),n(27,"Ca\xF3tico e Mau"),o()()(),t(28,"div",11)(29,"label",12),n(30,"\u{1F3AD} Tipo de Jogador *"),o(),t(31,"select",16),S("ngModelChange",function(e){m(i);let a=c();return C(a.jogador.tipo_jogador,e)||(a.jogador.tipo_jogador=e),g(e)}),t(32,"option",15),n(33,"Selecione..."),o(),t(34,"option"),n(35,"Aventureiro"),o(),t(36,"option"),n(37,"Mestre"),o()()(),t(38,"div",17),_(39,te,9,5,"div",18),o(),t(40,"div",19)(41,"div",9)(42,"h5",20),n(43,"\u2694\uFE0F Atributos calculados"),o(),t(44,"p"),n(45,"\u2764\uFE0F Vida: "),t(46,"b"),n(47),o(),t(48,"small"),n(49,"(Energia + Constitui\xE7\xE3o)"),o()(),t(50,"p"),n(51,"\u{1F496} Vida Total: "),t(52,"b"),n(53),o(),t(54,"small"),n(55,"(Vida + Armadura)"),o()(),t(56,"p"),n(57,"\u2728 Fator de Cura: "),t(58,"b"),n(59),o(),t(60,"small"),n(61,"(Energia / 3)"),o()(),t(62,"p"),n(63,"\u{1F3C3} Deslocamento: "),t(64,"b"),n(65),o(),t(66,"small"),n(67,"(Destreza / 3)"),o()()()(),t(68,"div",21)(69,"div",22)(70,"button",23),p("click",function(){m(i);let e=c();return g(e.cancelar())}),n(71," \u274C Cancelar "),o()(),t(72,"div",22)(73,"button",24),_(74,ie,2,0,"ng-container",25)(75,oe,3,0,"ng-container",25),o()()()()()()}if(l&2){let i=v(1),d=v(5),e=c();s(3),u("ngIf",e.jogador.imagem)("ngIfElse",d),s(10),E("ngModel",e.jogador.personagem),s(4),E("ngModel",e.jogador.alinhamento),s(14),E("ngModel",e.jogador.tipo_jogador),s(8),u("ngForOf",e.atributosNumericos),s(8),x(e.vida),s(6),x(e.vidaTotal),s(6),x(e.fatorCura),s(6),x(e.deslocamento),s(8),u("disabled",i.invalid||e.salvando),s(),u("ngIf",!e.salvando),s(),u("ngIf",e.salvando)}}var Y=class l{constructor(r){this.router=r}jogador=null;salvando=!1;atributosNumericos=[{key:"nivel",label:"N\xEDvel",icon:"\u{1F3C5}"},{key:"xp",label:"XP",icon:"\u2B50"},{key:"forca",label:"For\xE7a",icon:"\u{1F4AA}"},{key:"destreza",label:"Destreza",icon:"\u{1F3C3}"},{key:"constituicao",label:"Constitui\xE7\xE3o",icon:"\u{1FAA8}"},{key:"inteligencia",label:"Intelig\xEAncia",icon:"\u{1F9E0}"},{key:"sabedoria",label:"Sabedoria",icon:"\u{1F4D6}"},{key:"carisma",label:"Carisma",icon:"\u{1F60E}"},{key:"energia",label:"Energia",icon:"\u26A1"},{key:"classe_de_armadura",label:"Armadura",icon:"\u{1F6E1}\uFE0F"}];get vida(){return this.jogador?this.jogador.energia+this.jogador.constituicao:0}get vidaTotal(){return this.jogador?this.vida+this.jogador.classe_de_armadura:0}get fatorCura(){return this.jogador?Math.floor(this.jogador.energia/3):0}get deslocamento(){return this.jogador?Math.floor(this.jogador.destreza/3):0}getValor(r){return this.jogador?this.jogador[r]:0}setValor(r,i){this.jogador&&(this.jogador[r]=Math.max(0,i))}ajustarValor(r,i){this.setValor(r,this.getValor(r)+i)}onFileChange(r){let i=r.target;if(i.files&&i.files.length>0&&this.jogador){let d=i.files[0],e=new FileReader;e.onload=()=>{this.jogador&&(this.jogador.imagem=e.result)},e.readAsDataURL(d)}}removerImagem(){this.jogador&&(this.jogador.imagem="")}salvar(r){return w(this,null,function*(){if(!(r.invalid||!this.jogador))try{this.salvando=!0;let i=Q.getUser();if(!i?.email)throw new Error("Usu\xE1rio n\xE3o autenticado");this.jogador.email=i.email,yield j.updateJogador(this.jogador),window.alert("\u2705 Jogador atualizado com sucesso!"),this.router.navigate(["/jogador"])}catch(i){console.error("[EdicaoJogador] Erro ao salvar:",i),window.alert("\u274C Erro ao salvar jogador. Veja o console.")}finally{this.salvando=!1}})}ngOnInit(){return w(this,null,function*(){let r=yield j.getCurrentJogador();if(!r){window.alert("Nenhum jogador encontrado. V\xE1 para o cadastro primeiro."),this.router.navigate(["/cadastro"]);return}this.jogador=r})}cancelar(){this.router.navigate(["/jogador"])}static \u0275fac=function(i){return new(i||l)(k(N))};static \u0275cmp=M({type:l,selectors:[["app-edicao-jogador"]],decls:3,vars:1,consts:[["form","ngForm"],["uploadBox",""],[1,"d-flex","flex-column","min-vh-100","bg-dark","text-light"],[1,"flex-grow-1","pb-5"],[3,"ngSubmit",4,"ngIf"],[3,"ngSubmit"],[1,"position-relative","text-center","mb-3"],[4,"ngIf","ngIfElse"],[1,"card","bg-dark","border-0","shadow-sm"],[1,"card-body"],[1,"fw-bold","mb-3"],[1,"mb-3"],[1,"form-label","text-white"],["type","text","name","personagem","required","",1,"form-control","text-light","bg-dark",3,"ngModelChange","ngModel"],["name","alinhamento","required","",1,"form-select","text-light","bg-dark",3,"ngModelChange","ngModel"],["value","","disabled",""],["name","tipoJogador","required","",1,"form-select","text-light","bg-dark",3,"ngModelChange","ngModel"],[1,"row","row-cols-2","g-3","mt-3"],["class","col",4,"ngFor","ngForOf"],[1,"card","bg-secondary","text-light","mt-4"],[1,"fw-bold"],[1,"row","mt-4"],[1,"col-6"],["type","button",1,"btn","btn-secondary","w-100",3,"click"],["type","submit",1,"btn","btn-success","w-100",3,"disabled"],[4,"ngIf"],["alt","Preview",1,"w-100","rounded","shadow-sm",2,"height","250px","object-fit","cover",3,"src"],["type","button",1,"btn","btn-danger","rounded-circle","position-absolute","d-flex","align-items-center","justify-content-center",2,"top","10px","right","10px","width","40px","height","40px",3,"click"],[1,"d-flex","align-items-center","justify-content-center","border","rounded","w-100",2,"height","150px","background","#1e1e1e","cursor","pointer"],[1,"text-success","fs-1"],["type","file","accept","image/*",1,"d-none",3,"change"],[1,"col"],[1,"input-group"],["type","number","min","0",1,"form-control","text-center","text-light","bg-dark",3,"ngModelChange","ngModel","name"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(i,d){i&1&&(t(0,"div",2)(1,"div",3),_(2,ne,76,13,"form",4),o()()),i&2&&(s(2),u("ngIf",d.jogador))},dependencies:[T,A,I,K,R,U,G,P,L,q,W,z,X,H,O,B],encapsulation:2})};export{Y as EdicaoJogador};
