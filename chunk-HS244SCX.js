import{d as i}from"./chunk-ILJPX4RU.js";var a=class{static STORAGE_KEY="user";static CLIENT_ID="338305920567-bhd608ebcip1u08qf0gb5f08o4je4dnp.apps.googleusercontent.com";static signInWithGoogle(){return new Promise(e=>{if(typeof google>"u"||!google.accounts){console.error("Google Identity Services n\xE3o carregado."),e(null);return}let t=document.getElementById("gsi-hidden-btn");t||(t=document.createElement("div"),t.id="gsi-hidden-btn",t.style.display="none",document.body.appendChild(t),google.accounts.id.initialize({client_id:this.CLIENT_ID,auto_select:!1,callback:n=>{let r=n.credential;if(!r){e(null);return}let o=this.parseJwt(r),s={name:o.name,email:o.email,picture:o.picture,idToken:r};localStorage.setItem(this.STORAGE_KEY,JSON.stringify(s)),e(s)}}),google.accounts.id.renderButton(t,{type:"standard",theme:"outline",size:"large"})),t.querySelector("div[role=button]")?.click()})}static getUser(){let e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):null}static getIdToken(){return this.getUser()?.idToken||null}static logout(){localStorage.removeItem(this.STORAGE_KEY)}static isAuthenticated(){let e=this.getUser();if(!e)return!1;try{let t=this.parseJwt(e.idToken),n=Math.floor(Date.now()/1e3);return t.exp&&Number(t.exp)>n}catch{return!1}}static parseJwt(e){let n=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(n).split("").map(o=>"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(r)}static refreshIdToken(){return i(this,null,function*(){try{return yield this.signInWithGoogle()}catch(e){return console.error("[AuthService] Falha ao renovar token:",e),null}})}};export{a};
