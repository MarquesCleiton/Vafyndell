import{d as s}from"./chunk-CJJCGQOG.js";var a=class{static STORAGE_KEY="user";static CLIENT_ID="338305920567-bhd608ebcip1u08qf0gb5f08o4je4dnp.apps.googleusercontent.com";static signInWithGoogle(){return new Promise(e=>{if(typeof google>"u"||!google.accounts){console.error("Google Identity Services n\xE3o carregado."),e(null);return}google.accounts.id.initialize({client_id:this.CLIENT_ID,auto_select:!0,callback:t=>{let r=t.credential;if(!r){e(null);return}let o=this.parseJwt(r),n={name:o.name,email:o.email,picture:o.picture,idToken:r};localStorage.setItem(this.STORAGE_KEY,JSON.stringify(n)),e(n)}}),google.accounts.id.prompt(t=>{(t.isNotDisplayed()||t.isSkippedMoment())&&(google.accounts.id.renderButton(document.createElement("div"),{type:"standard",theme:"outline"}),google.accounts.id.prompt())})})}static getUser(){let e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):null}static getIdToken(){return this.getUser()?.idToken||null}static logout(){localStorage.removeItem(this.STORAGE_KEY)}static isAuthenticated(){let e=this.getUser();if(!e)return!1;try{let t=this.parseJwt(e.idToken),r=Math.floor(Date.now()/1e3);return t.exp&&Number(t.exp)>r}catch{return!1}}static parseJwt(e){let r=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),o=decodeURIComponent(atob(r).split("").map(n=>"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(o)}static refreshIdToken(){return s(this,null,function*(){try{return yield this.signInWithGoogle()}catch(e){return console.error("[AuthService] Falha ao renovar token:",e),null}})}};export{a};
