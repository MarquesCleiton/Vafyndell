<div class="d-flex flex-column min-vh-100 bg-dark text-light pb-5 mb-5">
  <div class="flex-grow-1 p-3">

    <!-- Loading -->
    <div *ngIf="carregando" class="text-center py-5">
      <div class="spinner-border text-light" role="status"></div>
      <p class="mt-2">Carregando NPC...</p>
    </div>

    <!-- ConteÃºdo -->
    <div *ngIf="!carregando && npc" class="card bg-secondary text-light shadow-lg border-0">
      <ng-container *ngIf="npc.imagem">
        <img [src]="npc.imagem" class="card-img-top object-fit-cover" alt="{{ npc.nome }}" style="max-height: 300px;" />
      </ng-container>

      <div class="card-body">
        <h4 class="fw-bold">{{ npc.nome }}</h4>
        <p class="mb-1"><b>ğŸ·ï¸ ClassificaÃ§Ã£o:</b> {{ npc.classificacao }}</p>
        <p class="mb-1"><b>ğŸ­ Tipo:</b> {{ npc.tipo }}</p>
        <p class="mb-1"><b>âš–ï¸ Alinhamento:</b> {{ npc.alinhamento || 'NÃ£o definido' }}</p>

        <hr />

        <!-- Atributos -->
        <p>â¤ï¸ Vida: <b>{{ npc.pontos_de_vida }}</b></p>
        <p>ğŸ›¡ï¸ Armadura: <b>{{ npc.classe_armadura }}</b></p>
        <p>â­ XP: <b>{{ npc.xp }}</b></p>
        <p>ğŸ’ª ForÃ§a: <b>{{ npc.forca }}</b></p>
        <p>ğŸª¨ ConstituiÃ§Ã£o: <b>{{ npc.constituicao }}</b></p>
        <p>ğŸ¤¸â€â™‚ï¸ Destreza: <b>{{ npc.destreza }}</b></p>
        <p>ğŸ“– Sabedoria: <b>{{ npc.sabedoria }}</b></p>
        <p>ğŸ§  InteligÃªncia: <b>{{ npc.inteligencia }}</b></p>
        <p>âš¡ Energia: <b>{{ npc.energia }}</b></p>

        <hr />

        <!-- DescriÃ§Ã£o -->
        <p *ngIf="npc.descricao" class="descricao-text">
          {{ npc.descricao }}
        </p>

        <!-- Ataques -->
        <div *ngIf="npc.ataques">
          <h6 class="fw-bold mt-3">âš”ï¸ Ataques</h6>
          <p class="ataques-text">{{ npc.ataques }}</p>
        </div>

        <!-- AÃ§Ãµes -->
        <div class="d-flex justify-content-between mt-4">
          <button class="btn btn-outline-light btn-sm" (click)="cancelar()">â¬… Voltar</button>
          <div>
            <button class="btn btn-warning btn-sm me-2" (click)="editarNpc()" [disabled]="processandoEditar">
              <ng-container *ngIf="!processandoEditar">âœï¸ Editar</ng-container>
              <ng-container *ngIf="processandoEditar">
                <span class="spinner-border spinner-border-sm me-2"></span> Editando...
              </ng-container>
            </button>
            <button class="btn btn-danger btn-sm" (click)="excluirNpc()" [disabled]="processandoExcluir">
              <ng-container *ngIf="!processandoExcluir">ğŸ—‘ï¸ Excluir</ng-container>
              <ng-container *ngIf="processandoExcluir">
                <span class="spinner-border spinner-border-sm me-2"></span> Excluindo...
              </ng-container>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Se nÃ£o encontrou -->
    <div *ngIf="!carregando && !npc" class="text-center text-muted py-5">
      NPC nÃ£o encontrado.
    </div>
  </div>

  <!-- BotÃ£o flutuante para adicionar NPC ao campo de batalha -->
  <button class="fab btn btn-danger rounded-circle shadow-lg d-flex align-items-center justify-content-center"
    (click)="adicionarAoCampo()" [disabled]="processandoAdicionar"
    style="position: fixed; bottom: 70px; right: 20px; z-index: 20; width: 70px; height: 70px; font-size: 2rem;">
    <ng-container *ngIf="!processandoAdicionar">âš”ï¸</ng-container>
    <ng-container *ngIf="processandoAdicionar">
      <div class="spinner-border text-light" role="status" style="width: 2rem; height: 2rem;"></div>
    </ng-container>
  </button>


</div>