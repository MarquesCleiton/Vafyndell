<div class="jogador-detalhe-wrapper d-flex flex-column min-vh-100 bg-dark text-light">
  <div class="flex-grow-1 d-flex justify-content-center">
    <div class="jogador-detalhe-container w-100">

      @if (loading) {
      <div class="text-center py-5">
        <div class="spinner-border text-light" role="status"></div>
        <p class="mt-2">Carregando jogador...</p>
      </div>
      } @else if (jogador) {
      <!-- Card principal -->
      <div class="card detalhe-card shadow-lg border-0">

        <!-- Imagem ou fallback -->
        <div class="position-relative">
          <ng-container *ngIf="jogador.imagem && jogador.imagem !== '-'; else noImagem">
            <img [src]="jogador.imagem" class="card-img-top detalhe-img" alt="Imagem do jogador"
              (click)="abrirImagem(jogador.imagem)" />
          </ng-container>
          <ng-template #noImagem>
            <div
              class="d-flex align-items-center justify-content-center bg-secondary text-dark detalhe-img fallback-icone">
              ğŸ‘¤
            </div>
          </ng-template>
        </div>

        <!-- ConteÃºdo -->
        <div class="card-body pb-5">
          <h4 class="fw-bold mb-1 text-light">ğŸ§™ {{ jogador.personagem }}</h4>
          <p class="text-secondary mb-3">âš–ï¸ {{ jogador.alinhamento || 'Sem alinhamento' }}</p>

          <!-- Infos bÃ¡sicas -->
          <ul class="info-list mb-3">
            <li>ğŸ… <span>NÃ­vel:</span> {{ jogador.nivel }}</li>
            <li>â­ <span>XP:</span> {{ jogador.xp }}</li>
            <li>ğŸ€ <span>Sorte:</span> {{ jogador.pontos_de_sorte }}</li>
            <li>
              â¤ï¸ <span>Vida:</span>
              <span [ngClass]="{ 'text-danger fw-bold': jogador.vida_atual! <= 0 }">
                {{ jogador.vida_atual }}
              </span>
              / {{ jogador.pontos_de_vida }}
            </li>
            <li>ğŸ›¡ï¸ <span>Armadura:</span> {{ jogador.classe_de_armadura }}</li>
            <li>ğŸ”° <span>Escudo:</span> {{ jogador.escudo }}</li>
            <li>ğŸ’” <span>Dano tomado:</span> {{ jogador.dano_tomado }}</li>
            <li>âœ¨ <span>Fator de cura:</span> {{ jogador.fator_cura }}</li>
            <li>ğŸš¶â€â™‚ï¸ <span>Deslocamento:</span> {{ jogador.deslocamento }}</li>
          </ul>


          <!-- Atributos -->
          <h6 class="fw-bold mt-3 text-light">ğŸ“Š Atributos</h6>
          <div class="atributos-grid compact mb-3">
            @for (attr of atributos; track attr.label) {
            <div class="atributo-item">
              {{ attr.icon }} <span>{{ attr.label }}</span>
              <b>{{ attr.value }}</b>
              <small class="text-light">
                ({{ attr.mod >= 0 ? '+' + attr.mod : attr.mod }})
              </small>
            </div>
            }
          </div>
        </div>
      </div>
      } @else {
      <div class="alert alert-warning mt-4">Nenhum jogador encontrado. VÃ¡ para o cadastro.</div>
      }

    </div>
  </div>

  <!-- BotÃ£o flutuante -->
  <button class="fab fab-primary" (click)="editarJogador()">âœï¸</button>
</div>

<!-- Modal de Imagem -->
<app-image-modal [imagem]="imagemSelecionada" [aberto]="modalAberto" (fecharModal)="modalAberto = false">
</app-image-modal>