<div class="d-flex flex-column min-vh-100 bg-dark text-light pb-5 mb-5">
  <div class="flex-grow-1 p-3">

    <!-- Loading -->
    <div *ngIf="carregando" class="text-center py-5">
      <div class="spinner-border text-light" role="status"></div>
      <p class="mt-2">Carregando NPC...</p>
    </div>

    <!-- Conteúdo -->
    <div *ngIf="!carregando && npc" class="card detalhe-card shadow-lg border-0">
      <ng-container *ngIf="npc.imagem">
        <img [src]="npc.imagem" class="card-img-top detalhe-img" alt="{{ npc.nome }}" />
      </ng-container>

      <div class="card-body p-3">
        <h5 class="fw-bold mb-3 text-light">{{ npc.nome }}</h5>

        <!-- Info básica -->
        <ul class="info-list mb-3">
          <li>🏷️ <span>Classificação:</span> {{ npc.classificacao }}</li>
          <li>🎭 <span>Tipo:</span> {{ npc.tipo }}</li>
          <li>⚖️ <span>Alinhamento:</span> {{ npc.alinhamento || 'Não definido' }}</li>
        </ul>

        <!-- Atributos -->
        <!-- Atributos -->
        <h6 class="fw-bold mt-3">📊 Atributos</h6>
        <div class="atributos-grid compact mb-3">
          <div class="atributo-item">❤️ <span>Vida</span> <b>{{ npc.pontos_de_vida }}</b></div>
          <div class="atributo-item">🛡️ <span>Armadura</span> <b>{{ npc.classe_armadura }}</b></div>
          <div class="atributo-item">⭐ <span>XP</span> <b>{{ npc.xp }}</b></div>
          <div class="atributo-item">💪 <span>Força</span> <b>{{ npc.forca }}</b></div>
          <div class="atributo-item">🪨 <span>Constituição</span> <b>{{ npc.constituicao }}</b></div>
          <div class="atributo-item">🤸‍♂️ <span>Destreza</span> <b>{{ npc.destreza }}</b></div>
          <div class="atributo-item">📖 <span>Sabedoria</span> <b>{{ npc.sabedoria }}</b></div>
          <div class="atributo-item">🧠 <span>Inteligência</span> <b>{{ npc.inteligencia }}</b></div>
          <div class="atributo-item">⚡ <span>Energia</span> <b>{{ npc.energia }}</b></div>
        </div>


        <!-- Descrição -->
        <div *ngIf="npc.descricao" class="mt-3">
          <h6 class="fw-bold">📝 Descrição</h6>
          <p class="descricao-text">{{ npc.descricao }}</p>
        </div>

        <!-- Ataques -->
        <div *ngIf="npc.ataques" class="mt-3">
          <h6 class="fw-bold">⚔️ Ataques</h6>
          <p class="ataques-text">{{ npc.ataques }}</p>
        </div>

        <!-- Ações -->
        <div class="d-flex justify-content-between mt-4">
          <button class="btn btn-outline-light btn-sm" (click)="cancelar()">⬅ Voltar</button>
          <div>
            <button class="btn btn-warning btn-sm me-2" (click)="editarNpc()" [disabled]="processandoEditar">
              <ng-container *ngIf="!processandoEditar">✏️ Editar</ng-container>
              <ng-container *ngIf="processandoEditar">
                <span class="spinner-border spinner-border-sm me-2"></span> Editando...
              </ng-container>
            </button>
            <button class="btn btn-danger btn-sm" (click)="excluirNpc()" [disabled]="processandoExcluir">
              <ng-container *ngIf="!processandoExcluir">🗑️ Excluir</ng-container>
              <ng-container *ngIf="processandoExcluir">
                <span class="spinner-border spinner-border-sm me-2"></span> Excluindo...
              </ng-container>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Se não encontrou -->
    <div *ngIf="!carregando && !npc" class="text-center text-secondary py-5">
      NPC não encontrado.
    </div>
  </div>

  <!-- FAB -->
  <button class="fab fab-danger" (click)="adicionarAoCampo()" [disabled]="processandoAdicionar">
    <ng-container *ngIf="!processandoAdicionar">⚔️</ng-container>
    <ng-container *ngIf="processandoAdicionar">
      <div class="spinner-border text-light" role="status" style="width: 2rem; height: 2rem;"></div>
    </ng-container>
  </button>
</div>