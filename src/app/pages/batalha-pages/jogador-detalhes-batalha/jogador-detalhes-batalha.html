<div class="personagem-detalhe-wrapper d-flex flex-column min-vh-100 bg-dark text-light">
  <div class="flex-grow-1 p-3 d-flex justify-content-center">
    <div class="personagem-detalhe-container w-100">
      
      <!-- Loading -->
      <div *ngIf="loading" class="text-center py-5">
        <div class="spinner-border text-light" role="status"></div>
        <p class="mt-2">Carregando personagem...</p>
      </div>

      <!-- Conteúdo -->
      <div *ngIf="!loading && jogador" class="card detalhe-card shadow-lg border-0">
        
        <!-- Imagem ou fallback -->
        <div class="position-relative">
          <ng-container *ngIf="jogador.imagem && jogador.imagem !== '-'; else noImagem">
            <img [src]="jogador.imagem" class="card-img-top detalhe-img" alt="Imagem do personagem" />
          </ng-container>
          <ng-template #noImagem>
            <div class="d-flex align-items-center justify-content-center bg-secondary text-dark detalhe-img"
                 style="height: 200px; font-size: 3rem;">
              👤
            </div>
          </ng-template>
        </div>

        <div class="card-body pb-5">
          <h4 class="fw-bold mb-1 text-light">
            {{ jogador.email ? '🧙' : '👹' }} {{ jogador.personagem }}
          </h4>
          <p class="text-secondary mb-3">
            ⚖️ {{ jogador.alinhamento || 'Sem alinhamento' }}
          </p>

          <!-- Infos gerais -->
          <ul class="info-list mb-3">
            <li>⭐ <span>XP:</span> {{ jogador.xp }}</li>

            <li>
              ❤️ <span>Vida:</span>
              <span [ngClass]="{ 'text-danger fw-bold': jogador.vida_atual! <= 0 }">
                {{ jogador.vida_atual }}
              </span>
              / {{ jogador.pontos_de_vida }}
            </li>

            <li>🛡️ <span>Armadura:</span> {{ jogador.classe_de_armadura }}</li>
            <li>💔 <span>Dano tomado:</span> {{ jogador.dano_tomado }}</li>
            <li>✨ <span>Fator de cura:</span> {{ jogador.fator_cura }}</li>
            <li>🚶‍♂️ <span>Deslocamento:</span> {{ jogador.deslocamento }}</li>
          </ul>

          <!-- Atributos -->
          <h6 class="fw-bold mt-3 text-light">📊 Atributos</h6>
          <div class="atributos-grid compact mb-3">
            <div class="atributo-item" *ngFor="let attr of atributos">
              {{ attr.icon }} <span>{{ attr.label }}</span>
              <b>{{ attr.value }}</b>
              <small class="text-light">({{ attr.mod >= 0 ? '+' + attr.mod : attr.mod }})</small>
            </div>
          </div>

          <!-- Extra só para NPC -->
          <div *ngIf="!jogador.email" class="mt-3">
            <h6 class="fw-bold text-light">📝 Descrição</h6>
            <p *ngIf="jogador.descricao" class="descricao-text">{{ jogador.descricao }}</p>

            <h6 *ngIf="jogador.ataques" class="fw-bold text-light mt-3">⚔️ Ataques</h6>
            <p *ngIf="jogador.ataques" class="ataques-text">{{ jogador.ataques }}</p>
          </div>
        </div>
      </div>

      <!-- Nenhum encontrado -->
      <div *ngIf="!loading && !jogador" class="alert alert-warning mt-4">
        Nenhum personagem encontrado.
      </div>
    </div>
  </div>
</div>
