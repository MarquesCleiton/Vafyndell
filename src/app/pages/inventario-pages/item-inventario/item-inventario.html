<div class="inventario-detalhe-wrapper d-flex flex-column min-vh-100 bg-dark text-light pb-5 mb-5">
  <!-- Loading inicial -->
  <div *ngIf="carregando" class="text-center py-5">
    <div class="spinner-border text-light" role="status"></div>
    <p class="mt-2">Carregando item...</p>
  </div>

  <!-- ConteÃºdo -->
  <div class="flex-grow-1 p-3 d-flex justify-content-center" *ngIf="!carregando && item">
    <div class="inventario-detalhe-container w-100">
      <div class="card detalhe-card shadow-lg border-0">

        <!-- CabeÃ§alho -->
        <div class="card-body p-3 border-bottom d-flex align-items-center gap-2">
          <button type="button" class="btn btn-outline-light btn-sm" (click)="cancelar()">
            â¬… Voltar
          </button>
          <h4 class="fw-bold mb-0 text-capitalize text-light">
            ğŸ’ {{ item.catalogo?.nome || 'Item desconhecido' }}
          </h4>
        </div>

        <!-- Imagem ou fallback -->
        <div class="position-relative">
          <ng-container *ngIf="item.catalogo?.imagem && item.catalogo?.imagem !== '-'; else noImagem">
            <img [src]="item.catalogo?.imagem"
                 class="card-img-top detalhe-img"
                 alt="{{ item.catalogo?.nome }}" />
          </ng-container>
          <ng-template #noImagem>
            <div class="d-flex align-items-center justify-content-center bg-secondary text-dark detalhe-img fallback-icone">
              ğŸ“¦
            </div>
          </ng-template>
        </div>

        <!-- InformaÃ§Ãµes -->
        <div class="card-body">
          <p class="text-light mb-1"><b>ğŸ“‚ Categoria:</b> {{ item.catalogo?.categoria || 'â€”' }}</p>
          <p class="text-light mb-1"><b>ğŸŒ± Origem:</b> {{ item.catalogo?.origem || 'â€”' }}</p>
          <p class="text-light mb-1"><b>ğŸ’ Raridade:</b> {{ item.catalogo?.raridade || 'â€”' }}</p>
          <p class="text-light mb-1">
            <b>ğŸ”¢ Quantidade:</b>
            {{ item.inventario.quantidade }} {{ item.catalogo?.unidade_medida || '' }}
          </p>
          <p class="text-light mb-3">
            <b>âš–ï¸ Peso total:</b>
            {{ (item.inventario.quantidade || 0) * (item.catalogo?.peso || 0) }} kg
          </p>

          <hr class="border-secondary" />

          <p *ngIf="item.catalogo?.efeito" class="mb-1 text-info">
            âœ¨ <b>Efeito:</b> {{ item.catalogo?.efeito }}
          </p>
          <p *ngIf="item.catalogo?.colateral" class="mb-1 text-danger">
            âš ï¸ <b>Colateral:</b> {{ item.catalogo?.colateral }}
          </p>
          <p *ngIf="item.catalogo?.descricao" class="fst-italic text-light descricao-text">
            ğŸ“ <b>DescriÃ§Ã£o:</b> {{ item.catalogo?.descricao }}
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- FABs -->
  <div class="fab-stack">
    <!-- Cancelar -->
    <button class="fab fab-primary" (click)="cancelar()">â¬…ï¸</button>

    <!-- Excluir -->
    <button class="fab fab-danger" [disabled]="processandoExcluir" (click)="excluirItem()">
      <ng-container *ngIf="!processandoExcluir">ğŸ—‘ï¸</ng-container>
      <ng-container *ngIf="processandoExcluir">
        <span class="spinner-border spinner-border-sm"></span>
      </ng-container>
    </button>

    <!-- Editar -->
    <button class="fab fab-warning" [disabled]="processandoEditar" (click)="editarItem()">
      <ng-container *ngIf="!processandoEditar">âœï¸</ng-container>
      <ng-container *ngIf="processandoEditar">
        <span class="spinner-border spinner-border-sm"></span>
      </ng-container>
    </button>
  </div>
</div>
