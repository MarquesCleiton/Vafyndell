<mat-sidenav-container class="app-container bg-dark text-light" *ngIf="!isLoginPage(); else loginOutlet">
  <!-- Menu lateral (desktop) -->
  <mat-sidenav #sidenav [mode]="isDesktop ? 'side' : 'over'" class="sidenav bg-dark text-light" [opened]="isDesktop">
    <!-- Cabeçalho -->
    <div class="sidenav-header d-flex align-items-center gap-2 px-3 py-3 border-bottom">
      <span class="fw-bold app-title">Vafyndell</span>
    </div>

    <mat-nav-list>
      <a mat-list-item (click)="navigateWithClose('/jogador', sidenav)">🦁 Jogador</a>
      <a mat-list-item (click)="navigateWithClose('/skilltree', sidenav)">🧠 Skills</a>
      <a mat-list-item (click)="navigateWithClose('/edicao-skilltree', sidenav)">➕ editarskilltree</a>
      <a mat-list-item (click)="navigateWithClose('/inventario-jogador', sidenav)">📦 Inventário</a>
      <a mat-list-item (click)="navigateWithClose('/oficina', sidenav)">⚒️ Oficina</a>
      <a mat-list-item (click)="navigateWithClose('/batalha', sidenav)">⚔️ Batalha</a>
      <a mat-list-item (click)="navigateWithClose('/anotacoes', sidenav)">📝 Notas</a>

      <mat-divider></mat-divider>

      <a mat-list-item (click)="navigateWithClose('/catalogo', sidenav)">📚 Catálogo</a>
      <a mat-list-item (click)="navigateWithClose('/npcs', sidenav)">👹 Feras & Vilões</a>
    </mat-nav-list>

  </mat-sidenav>

  <!-- Conteúdo principal -->
  <mat-sidenav-content>
    <!-- Topbar -->
    <mat-toolbar class="bg-dark text-light fixed-top d-flex align-items-center">
      <button mat-icon-button (click)="sidenav.toggle()" class="text-light d-lg-none">
        <mat-icon>menu</mat-icon>
      </button>
      <span class="ms-2">{{ title() }}</span>
      <span class="flex-grow-1"></span>
      <button mat-icon-button (click)="onRefresh()" class="text-light">
        <mat-icon>refresh</mat-icon>
      </button>
    </mat-toolbar>

    <!-- Área de rotas -->
    <div class="page-content">
      <router-outlet></router-outlet>
    </div>

    <!-- Navbar inferior (só mobile) -->
    <nav
      class="bottom-nav bg-dark border-top border-secondary d-flex justify-content-around py-2 fixed-bottom d-lg-none">
      <button mat-button (click)="navigateTo('/jogador')" class="nav-item d-flex flex-column align-items-center">
        <mat-icon>person</mat-icon>
        <small>Jogador</small>
      </button>
      <button mat-button (click)="navigateTo('/skilltree')" class="nav-item d-flex flex-column align-items-center">
        <mat-icon>psychology</mat-icon>
        <small>Skills</small>
      </button>
      <button mat-button (click)="navigateTo('/inventario-jogador')"
        class="nav-item d-flex flex-column align-items-center">
        <mat-icon>inventory</mat-icon>
        <small>Inventário</small>
      </button>
      <button mat-button (click)="navigateTo('/oficina')" class="nav-item d-flex flex-column align-items-center">
        <mat-icon>build</mat-icon>
        <small>Oficina</small>
      </button>
      <button mat-button (click)="navigateTo('/batalha')" class="nav-item d-flex flex-column align-items-center">
        <mat-icon>swords</mat-icon>
        <small>Batalha</small>
      </button>
      <button mat-button (click)="navigateTo('/anotacoes')" class="nav-item d-flex flex-column align-items-center">
        <mat-icon>notes</mat-icon>
        <small>Notas</small>
      </button>
    </nav>
  </mat-sidenav-content>
</mat-sidenav-container>

<!-- Template só para login -->
<ng-template #loginOutlet>
  <router-outlet></router-outlet>
</ng-template>