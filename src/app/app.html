<mat-sidenav-container class="app-container bg-dark text-light" *ngIf="!isLoginPage(); else loginOutlet">
  <!-- Menu lateral -->
  <mat-sidenav #sidenav mode="over" class="sidenav bg-dark text-light">
    <mat-nav-list>
      <a mat-list-item (click)="navigateTo('/catalogo'); sidenav.close()">Catálogo</a>
      <a mat-list-item (click)="navigateTo('/npcs'); sidenav.close()">Feras & Vilões</a>
    </mat-nav-list>
  </mat-sidenav>

  <!-- Conteúdo principal -->
  <mat-sidenav-content>
    <!-- Topbar fixa -->
    <mat-toolbar class="bg-dark text-light fixed-top d-flex align-items-center">
      <button mat-icon-button (click)="sidenav.toggle()" class="text-light">
        <mat-icon>menu</mat-icon>
      </button>
      <span class="ms-2">{{ title() }}</span>
      <span class="flex-grow-1"></span>
      <button mat-icon-button (click)="onRefresh()" class="text-light">
        <mat-icon>refresh</mat-icon>
      </button>
    </mat-toolbar>

    <!-- Área de rotas -->
    <div class="page-content">
      <router-outlet></router-outlet>
    </div>

    <!-- FAB só em /jogador -->
    <button *ngIf="showFab()" mat-fab color="primary" class="fab-edit" (click)="editarJogador()">
      <mat-icon>edit</mat-icon>
    </button>

    <!-- Navbar inferior -->
    <nav class="bottom-nav bg-dark border-top border-secondary d-flex justify-content-around py-2 fixed-bottom">
      <button mat-button (click)="navigateTo('/jogador')" class="nav-item d-flex flex-column align-items-center">
        <mat-icon>person</mat-icon>
        <small>Jogador</small>
      </button>
      <button mat-button (click)="navigateTo('/skills-jogador')" class="nav-item d-flex flex-column align-items-center">
        <mat-icon>psychology</mat-icon>
        <small>Skills</small>
      </button>
      <button mat-button (click)="navigateTo('/inventario-jogador')"
              class="nav-item d-flex flex-column align-items-center">
        <mat-icon>inventory</mat-icon>
        <small>Inventário</small>
      </button>
      <button mat-button (click)="navigateTo('/oficina')" class="nav-item d-flex flex-column align-items-center">
        <mat-icon>build</mat-icon>
        <small>Oficina</small>
      </button>
      <button mat-button (click)="navigateTo('/batalha')" class="nav-item d-flex flex-column align-items-center">
        <mat-icon>swords</mat-icon>
        <small>Batalha</small>
      </button>
      <button mat-button (click)="navigateTo('/anotacoes')" class="nav-item d-flex flex-column align-items-center">
        <mat-icon>notes</mat-icon>
        <small>Notas</small>
      </button>
    </nav>
  </mat-sidenav-content>
</mat-sidenav-container>

<!-- Template alternativo só para login -->
<ng-template #loginOutlet>
  <router-outlet></router-outlet>
</ng-template>
