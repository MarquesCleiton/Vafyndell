import{a as s}from"./chunk-G3GD7RGI.js";import"./chunk-W7DVKRY2.js";import"./chunk-HS244SCX.js";import{Ca as C,Da as D,Ea as I,Fa as y,Ga as p,Ha as a,Ia as n,Ja as x,Jb as z,Mb as M,Na as w,Oa as F,Ra as j,Ta as f,Vb as k,a as b,b as _,d as u,fb as o,gb as c,ha as h,hb as m,ia as i,ib as T,ma as J,qa as E,ua as S}from"./chunk-ILJPX4RU.js";var R=(r,e)=>e.label;function P(r,e){r&1&&(a(0,"div",2),x(1,"div",6),a(2,"p",7),o(3,"Carregando jogador..."),n()())}function L(r,e){if(r&1&&(w(0),x(1,"img",16),F()),r&2){let t=f(2);i(),p("src",t.jogador.imagem,h)}}function V(r,e){if(r&1&&(a(0,"div",15)(1,"div",17)(2,"div"),o(3),n(),a(4,"div"),o(5),a(6,"small"),o(7),n()()()()),r&2){let t=e.$implicit;i(3),T("",t.icon," ",t.label),i(2),m("",t.value," "),i(2),m("(",t.mod>=0?"+"+t.mod:t.mod,")")}}function $(r,e){if(r&1&&(a(0,"div",3),S(1,L,2,1,"ng-container",8),a(2,"div",9)(3,"h4",10),o(4),n(),a(5,"p",11),o(6),n(),a(7,"ul",12)(8,"li",13),o(9,"\u{1F3C5} N\xEDvel: "),a(10,"b"),o(11),n()(),a(12,"li",13),o(13,"\u2B50 XP: "),a(14,"b"),o(15),n()(),a(16,"li",13),o(17,"\u{1F496} Vida total: "),a(18,"b"),o(19),n()(),a(20,"li",13),o(21,"\u2764\uFE0F Vida: "),a(22,"b"),o(23),n(),o(24," | \u{1F6E1}\uFE0F Armadura: "),a(25,"b"),o(26),n()(),a(27,"li",13),o(28,"\u{1F494} Dano tomado: "),a(29,"b"),o(30),n()(),a(31,"li",13),o(32,"\u2728 Fator de cura: "),a(33,"b"),o(34),n()()(),a(35,"div",14),I(36,V,8,4,"div",15,R),n()()()),r&2){let t=f();i(),p("ngIf",t.jogador.imagem),i(3),m("\u{1F9D9} ",t.jogador.personagem),i(2),m("\u2696\uFE0F ",t.jogador.alinhamento),i(5),c(t.jogador.nivel),i(4),c(t.jogador.xp),i(4),c(t.jogador.vida_total),i(4),c(t.jogador.pontos_de_vida),i(3),c(t.jogador.classe_de_armadura),i(4),c(t.jogador.dano_tomado),i(4),c(t.jogador.fator_cura),i(2),y(t.atributos)}}function A(r,e){r&1&&(a(0,"div",4),o(1,"Nenhum jogador encontrado. V\xE1 para o cadastro."),n())}var N=class r{constructor(e){this.router=e}jogador=null;atributos=[];loading=!0;ngOnInit(){return u(this,null,function*(){console.log("[Jogador] ngOnInit \u2192 carregando jogador...");try{let e=yield s.getLocalJogador();if(e)console.log("[Jogador] Jogador local encontrado:",e),this.setJogador(e),s.syncJogadores().then(t=>u(this,null,function*(){if(t){console.log("[Jogador] Cache atualizado. Recarregando jogador...");let l=yield s.getLocalJogador();l&&this.setJogador(l)}}));else{console.log("[Jogador] Nenhum jogador local. Tentando buscar online...");let t=yield s.forceFetchJogador();t?this.setJogador(t):(console.warn("[Jogador] Nenhum jogador encontrado online \u2192 redirecionando para o cadastro"),this.router.navigate(["/cadastro-jogador"]))}}catch(e){console.error("[Jogador] Erro ao carregar Jogador:",e),this.router.navigate(["/login"])}})}setJogador(e){let t=e.energia+e.constituicao,l=Math.floor(e.energia/3),v=t+e.classe_de_armadura,g=Math.floor(e.destreza/3);this.jogador=_(b({},e),{pontos_de_vida:t,fator_cura:l,vida_total:v,deslocamento:g});let d=O=>Math.floor((O-10)/2);this.atributos=[{label:"For\xE7a",value:e.forca,mod:d(e.forca),icon:"\u{1F4AA}"},{label:"Destreza",value:e.destreza,mod:d(e.destreza),icon:"\u{1F938}\u200D\u2642\uFE0F"},{label:"Constitui\xE7\xE3o",value:e.constituicao,mod:d(e.constituicao),icon:"\u{1FAA8}"},{label:"Intelig\xEAncia",value:e.inteligencia,mod:d(e.inteligencia),icon:"\u{1F9E0}"},{label:"Sabedoria",value:e.sabedoria,mod:d(e.sabedoria),icon:"\u{1F4D6}"},{label:"Carisma",value:e.carisma,mod:d(e.carisma),icon:"\u{1F60E}"},{label:"Energia",value:e.energia,mod:d(e.energia),icon:"\u26A1"},{label:"Deslocamento",value:g,mod:d(g),icon:"\u{1F6B6}\u200D\u2642\uFE0F\u200D\u27A1\uFE0F"}],this.loading=!1}editarJogador(){this.router.navigate(["/edicao-jogador"])}static \u0275fac=function(t){return new(t||r)(J(k))};static \u0275cmp=E({type:r,selectors:[["app-jogador"]],decls:7,vars:1,consts:[[1,"d-flex","flex-column","min-vh-100","bg-dark","text-light"],[1,"flex-grow-1","pb-5"],[1,"text-center","py-5"],[1,"card","bg-dark","text-light","border-0","shadow-lg"],[1,"alert","alert-warning","mt-4"],[1,"btn","btn-primary","rounded-circle","shadow-lg","d-flex","align-items-center","justify-content-center",2,"position","fixed","bottom","80px","right","25px","width","60px","height","60px","font-size","1.5rem","z-index","1040",3,"click"],["role","status",1,"spinner-border","text-light"],[1,"mt-2"],[4,"ngIf"],[1,"card-body","pb-5"],[1,"card-title","fw-bold"],[1,"card-subtitle","text-light","mb-3"],[1,"list-group","list-group-flush"],[1,"list-group-item","bg-dark","text-light","border-0"],[1,"row","row-cols-2","g-2","mt-3"],[1,"col"],["alt","Imagem do jogador",1,"card-img-top","object-fit-cover",2,"max-height","300px",3,"src"],[1,"p-2","rounded","bg-secondary","text-light","text-center","fw-bold","d-flex","flex-column","align-items-center"]],template:function(t,l){t&1&&(a(0,"div",0)(1,"div",1),C(2,P,4,0,"div",2)(3,$,38,10,"div",3)(4,A,2,0,"div",4),n(),a(5,"button",5),j("click",function(){return l.editarJogador()}),o(6," \u270F\uFE0F "),n()()),t&2&&(i(2),D(l.loading?2:l.jogador?3:4))},dependencies:[M,z],styles:[".page-content[_ngcontent-%COMP%], .flex-grow-1[_ngcontent-%COMP%]{padding-bottom:120px!important}"]})};export{N as Jogador};
