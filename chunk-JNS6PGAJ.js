import{a as C}from"./chunk-2YMM3WEV.js";import{a as R,b as $,e as B,m as W}from"./chunk-S3AV3E44.js";import"./chunk-DUOZFNR4.js";import"./chunk-OZ52KALQ.js";import{$ as I,Ba as S,Ca as P,Da as v,Fa as _,Ha as d,M as u,N as h,Ra as k,Sa as c,Ta as p,Ua as x,Wa as E,Xa as F,Ya as T,Za as D,_a as z,a as b,aa as o,b as y,d as w,da as M,fa as O,ja as g,lb as L,mb as N,nb as V,ua as l,va as a,wa as r,wb as j,xa as f}from"./chunk-DR7ZYR7E.js";function q(i,e){i&1&&(a(0,"div",10),f(1,"div",11),a(2,"p",12),c(3,"Carregando itens..."),r()())}function U(i,e){if(i&1&&(a(0,"div",13),c(1),r()),i&2){let t=d();o(),x(' Nenhum item encontrado para "',t.filtro,'" ')}}function Y(i,e){if(i&1&&f(0,"img",31),i&2){let t=d().$implicit;l("alt",D(t.nome||"Item"))("src",t.imagem,I)}}function G(i,e){if(i&1&&(a(0,"p",32),c(1),r()),i&2){let t=d().$implicit;o(),p(t.colateral)}}function H(i,e){if(i&1&&(a(0,"p",33),c(1),r()),i&2){let t=d().$implicit;o(),p(t.descricao)}}function J(i,e){if(i&1){let t=v();a(0,"div",23)(1,"div",24),_("click",function(){let s=u(t).$implicit,m=d(4);return h(m.abrirItem(s))}),a(2,"div",25),g(3,Y,1,3,"img",26),a(4,"div")(5,"h6",27),c(6),r(),a(7,"small"),c(8),r()()(),a(9,"div")(10,"p",28),c(11),r(),g(12,G,2,1,"p",29)(13,H,2,1,"p",30),r()()()}if(i&2){let t=e.$implicit,n=d(4);o(3),l("ngIf",t.imagem),o(3),p(t.nome||"Sem nome"),o(),k(z("raridade ",n.getRaridadeClass(t.raridade))),o(),x(" ",t.raridade||"Comum"," "),o(3),p(t.efeito||"\u2014"),o(),l("ngIf",t.colateral),o(),l("ngIf",t.descricao)}}function K(i,e){if(i&1&&(a(0,"div",20)(1,"div",21),g(2,J,14,9,"div",22),r()()),i&2){let t=d().$implicit;o(2),l("ngForOf",t.itens)}}function Q(i,e){if(i&1){let t=v();a(0,"div",15)(1,"div",16)(2,"span",17),c(3),r(),a(4,"span",18),_("click",function(){let s=u(t).$implicit,m=d(2);return h(m.toggleCategoria(s))}),c(5),r()(),g(6,K,3,1,"div",19),r()}if(i&2){let t=e.$implicit;o(3),p(t.nome||"Outros"),o(2),x(" ",t.expandido?"\u25BC":"\u25B6"," "),o(),l("ngIf",t.expandido)}}function X(i,e){if(i&1&&(S(0),g(1,Q,7,3,"div",14),P()),i&2){let t=d();o(),l("ngForOf",t.categoriasFiltradas)}}var A=class i{constructor(e){this.router=e}categorias=[];categoriasFiltradas=[];carregando=!0;filtro="";ngOnInit(){return w(this,null,function*(){try{this.carregando=!0,yield C.syncItens();let e=yield C.getLocalItens(),t=new Map;e.forEach(n=>{t.has(n.categoria)||t.set(n.categoria||"Outros",[]),t.get(n.categoria||"Outros").push(n)}),this.categorias=Array.from(t.entries()).sort((n,s)=>String(n[0]).localeCompare(String(s[0]))).map(([n,s])=>({nome:String(n||"Outros"),itens:s,expandido:!1})),this.categoriasFiltradas=[...this.categorias]}catch(e){console.error("[Catalogo] Erro ao carregar itens:",e)}finally{this.carregando=!1}})}toggleCategoria(e){e.expandido=!e.expandido}novoItem(){this.router.navigate(["/cadastro-item-catalogo"])}aplicarFiltro(){let e=this.filtro.toLowerCase();if(!e){this.categoriasFiltradas=[...this.categorias];return}this.categoriasFiltradas=this.categorias.map(t=>y(b({},t),{itens:t.itens.filter(n=>String(n.nome||"").toLowerCase().includes(e)||String(n.raridade||"").toLowerCase().includes(e)||String(n.efeito||"").toLowerCase().includes(e)||String(n.colateral||"").toLowerCase().includes(e))})).filter(t=>t.itens.length>0)}getRaridadeClass(e){return e?String(e).toLowerCase():"comum"}abrirItem(e){this.router.navigate(["/item-catalogo",e.id])}static \u0275fac=function(t){return new(t||i)(M(j))};static \u0275cmp=O({type:i,selectors:[["app-catalogo"]],decls:11,vars:4,consts:[[1,"d-flex","flex-column","min-vh-100","bg-dark","text-light"],[1,"flex-grow-1","px-3","pb-5"],["class","text-center py-5",4,"ngIf"],[1,"mt-5","pt-"],["class","text-center text-muted py-5",4,"ngIf"],[4,"ngIf"],[1,"search-bar-bottom","bg-black","border-top","px-3","py-2"],["type","text","placeholder","\u{1F50D} Pesquisar no cat\xE1logo...",1,"form-control","bg-dark","text-light","border-light","rounded-pill","px-3",3,"ngModelChange","input","ngModel"],[1,"fab","btn","btn-primary","rounded-circle","shadow-lg",3,"click"],[1,"fs-4"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-light"],[1,"mt-2"],[1,"text-center","text-muted","py-5"],["class","mb-4",4,"ngFor","ngForOf"],[1,"mb-4"],[1,"categoria-header","d-flex","justify-content-between","align-items-center","rounded"],[1,"fw-bold"],[1,"toggle-icon",3,"click"],["class","mt-3",4,"ngIf"],[1,"mt-3"],[1,"row","row-cols-1","row-cols-md-2","g-3"],["class","col",4,"ngFor","ngForOf"],[1,"col"],[1,"card","catalogo-card","shadow-sm","h-100","p-3",3,"click"],[1,"d-flex","align-items-center","mb-3"],["class","rounded me-3 shadow-sm","style","width: 65px; height: 65px; object-fit: cover;",3,"src","alt",4,"ngIf"],[1,"fw-bold","text-white","mb-1"],[1,"mb-1","small","efeito-text"],["class","small colateral",4,"ngIf"],["class","small descricao-text fst-italic",4,"ngIf"],[1,"rounded","me-3","shadow-sm",2,"width","65px","height","65px","object-fit","cover",3,"src","alt"],[1,"small","colateral"],[1,"small","descricao-text","fst-italic"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1),g(2,q,4,0,"div",2),f(3,"div",3),g(4,U,2,1,"div",4)(5,X,2,1,"ng-container",5),r(),a(6,"div",6)(7,"input",7),T("ngModelChange",function(m){return F(n.filtro,m)||(n.filtro=m),m}),_("input",function(){return n.aplicarFiltro()}),r()(),a(8,"button",8),_("click",function(){return n.novoItem()}),a(9,"span",9),c(10,"\uFF0B"),r()()()),t&2&&(o(2),l("ngIf",n.carregando),o(2),l("ngIf",!n.carregando&&n.categoriasFiltradas.length===0),o(),l("ngIf",!n.carregando),o(2),E("ngModel",n.filtro))},dependencies:[V,L,N,W,R,$,B],styles:["[_ngcontent-%COMP%]:root{--header-height: 56px;--bottom-nav-height: 56px;--search-height: 56px}.categoria-header[_ngcontent-%COMP%]{position:sticky;top:var(--header-height);z-index:10;background-color:#2c2c2c;padding:6px 12px;font-size:.95rem;font-weight:600;letter-spacing:.5px;border-radius:6px}.search-bar-bottom[_ngcontent-%COMP%]{position:fixed;bottom:var(--bottom-nav-height);left:0;right:0;z-index:1100;background:#212529;min-height:var(--search-height);display:flex;align-items:center}.flex-grow-1[_ngcontent-%COMP%]{padding-bottom:calc(var(--search-height) + var(--bottom-nav-height) + 1rem)}.fab[_ngcontent-%COMP%]{position:fixed;bottom:calc(var(--bottom-nav-height) + var(--search-height) + 20px);right:20px;width:56px;height:56px;display:flex;align-items:center;justify-content:center;font-size:1.5rem;z-index:1200;background:#0d6efd;border:none;transition:all .2s ease-in-out}.toggle-icon[_ngcontent-%COMP%]{font-size:1rem;cursor:pointer;transition:transform .2s}.toggle-icon[_ngcontent-%COMP%]:hover{transform:scale(1.15)}.catalogo-card[_ngcontent-%COMP%]{background:#1e1e1e;border:1px solid #333;border-radius:14px;transition:all .2s ease-in-out}.catalogo-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 6px 14px #00000073}.efeito-text[_ngcontent-%COMP%]{color:#e6e6e6!important}.descricao-text[_ngcontent-%COMP%]{color:#cfcfcf!important}.text-light[_ngcontent-%COMP%]{color:#f0f0f0!important}.text-muted[_ngcontent-%COMP%]{color:#b8b8b8!important}.raridade.comum[_ngcontent-%COMP%]{color:#999}.raridade.incomum[_ngcontent-%COMP%]{color:#6fbf73}.raridade.raro[_ngcontent-%COMP%]{color:#4a90e2}.raridade.\\e9pico[_ngcontent-%COMP%]{color:#9b7ecb}.raridade.lend\\e1rio[_ngcontent-%COMP%]{color:#d4af37}.colateral[_ngcontent-%COMP%]{color:#c97a7a!important}.fab[_ngcontent-%COMP%]{position:fixed;bottom:80px;right:20px;width:56px;height:56px;display:flex;align-items:center;justify-content:center;font-size:1.5rem;z-index:100;background:#0d6efd;border:none;transition:all .2s ease-in-out}.fab[_ngcontent-%COMP%]:hover{transform:scale(1.1);background:#0b5ed7}"]})};export{A as Catalogo};
