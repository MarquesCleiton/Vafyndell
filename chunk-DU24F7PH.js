var s=class{static STORAGE_KEY="user";static CLIENT_ID="338305920567-bhd608ebcip1u08qf0gb5f08o4je4dnp.apps.googleusercontent.com";static signInWithGoogle(){return new Promise(e=>{if(typeof google>"u"||!google.accounts){console.error("Google Identity Services n\xE3o carregado."),e(null);return}google.accounts.id.initialize({client_id:this.CLIENT_ID,auto_select:!0,callback:t=>{let o=t.credential;if(!o){e(null);return}let n=this.parseJwt(o),r={name:n.name,email:n.email,picture:n.picture,idToken:o};localStorage.setItem(this.STORAGE_KEY,JSON.stringify(r)),e(r)}}),google.accounts.id.prompt(t=>{(t.isNotDisplayed()||t.isSkippedMoment())&&(google.accounts.id.renderButton(document.createElement("div"),{type:"standard",theme:"outline"}),google.accounts.id.prompt())})})}static getUser(){let e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):null}static getIdToken(){return this.getUser()?.idToken||null}static logout(){localStorage.removeItem(this.STORAGE_KEY)}static isAuthenticated(){let e=this.getUser();if(!e)return!1;try{let t=this.parseJwt(e.idToken),o=Math.floor(Date.now()/1e3);return t.exp&&Number(t.exp)>o}catch{return!1}}static parseJwt(e){let o=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(o).split("").map(r=>"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(n)}};export{s as a};
